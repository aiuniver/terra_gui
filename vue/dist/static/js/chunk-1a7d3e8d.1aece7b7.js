(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1a7d3e8d"],{"002d":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["t-input"]},["checkbox"===(e.type||"text")?s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],class:["t-input__input",{"t-input__input--error":e.error},{"t-input__input--small":e.small}],attrs:{name:e.name||e.parse,"data-degree":e.degree,autocomplete:"off",disabled:e.isDisabled,type:"checkbox"},domProps:{checked:Array.isArray(e.input)?e._i(e.input,null)>-1:e.input},on:{blur:e.change,focus:e.focus,mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1},change:function(t){var s=e.input,a=t.target,i=!!a.checked;if(Array.isArray(s)){var r=null,n=e._i(s,r);a.checked?n<0&&(e.input=s.concat([r])):n>-1&&(e.input=s.slice(0,n).concat(s.slice(n+1)))}else e.input=i}}},"input",e.$attrs,!1)):"radio"===(e.type||"text")?s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],class:["t-input__input",{"t-input__input--error":e.error},{"t-input__input--small":e.small}],attrs:{name:e.name||e.parse,"data-degree":e.degree,autocomplete:"off",disabled:e.isDisabled,type:"radio"},domProps:{checked:e._q(e.input,null)},on:{blur:e.change,focus:e.focus,mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1},change:function(t){e.input=null}}},"input",e.$attrs,!1)):s("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],class:["t-input__input",{"t-input__input--error":e.error},{"t-input__input--small":e.small}],attrs:{name:e.name||e.parse,"data-degree":e.degree,autocomplete:"off",disabled:e.isDisabled,type:e.type||"text"},domProps:{value:e.input},on:{blur:e.change,focus:e.focus,mouseover:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1},input:function(t){t.target.composing||(e.input=t.target.value)}}},"input",e.$attrs,!1)),e.error&&e.hover?s("div",{class:["t-field__hint",{"t-field__hint--big":!e.small}]},[s("span",[e._v(e._s(e.error))])]):e._e()])},i=[],r=(s("a9e3"),s("caad"),s("2532"),s("b0c0"),{name:"t-input-new",props:{type:String,value:[String,Number],parse:String,name:String,small:Boolean,error:String,degree:Number,disabled:[Boolean,Array]},data:function(){return{isChange:!1,hover:!1}},computed:{isDisabled:function(){return Array.isArray(this.disabled)?!!this.disabled.includes(this.name):this.disabled},input:{set:function(e){this.$emit("input",e),this.isChange=!0},get:function(){return this.value}}},methods:{label:function(){this.$el.children[0].focus()},focus:function(e){this.$emit("focus",e),this.error&&this.$emit("clean",!0)},change:function(e){var t=e.target;if(this.isChange){var s="number"===this.type?+t.value:t.value;this.$emit("change",{name:this.name,value:s}),this.$emit("parse",{name:this.name,parse:this.parse,value:s}),this.isChange=!1}}},created:function(){this.input=this.value}}),n=r,o=(s("0cf2"),s("2877")),l=Object(o["a"])(n,a,i,!1,null,"c540ef36",null);t["a"]=l.exports},"0cf2":function(e,t,s){"use strict";s("a5a4")},"31b2":function(e,t,s){},"3c93":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-profile"},[s("p",{staticClass:"page-profile__title"},[e._v("Мой профиль")]),s("div",{staticClass:"page-profile__block"},[s("TInputNew",{attrs:{label:"Имя",error:e.errFirst},on:{input:function(t){e.errFirst=""}},model:{value:e.firstName,callback:function(t){e.firstName="string"===typeof t?t.trim():t},expression:"firstName"}}),s("TInputNew",{attrs:{label:"Фамилия",error:e.errLast},on:{input:function(t){e.errLast=""}},model:{value:e.lastName,callback:function(t){e.lastName="string"===typeof t?t.trim():t},expression:"lastName"}})],1),s("div",{staticClass:"page-profile__btns"},[s("d-button",{staticClass:"btn",attrs:{loading:e.isLoading,disabled:e.isLoading},on:{click:e.save}},[e._v("Сохранить")])],1),s("hr"),s("div",{staticClass:"page-profile__block"},[s("div",{staticClass:"page-profile__block--contact"},[s("p",{staticClass:"page-profile__label"},[e._v("Логин")]),s("p",{staticClass:"page-profile__text"},[e._v(e._s(e.user.login))])]),s("div",{staticClass:"page-profile__block--contact"},[s("p",{staticClass:"page-profile__label"},[e._v("E-mail")]),s("p",{staticClass:"page-profile__text"},[e._v(e._s(e.user.email))])])]),s("hr"),s("div",{staticClass:"page-profile__token"},[s("p",{staticClass:"page-profile__label"},[e._v("Token")]),s("p",{staticClass:"page-profile__text"},[s("span",{ref:"token"},[e._v(e._s(e.user.token))]),s("i",{staticClass:"btn-copy",on:{click:e.copy}}),s("span",{staticClass:"copy-msg"})]),s("div",{staticClass:"btn-text",on:{click:e.updateToken}},[e._v("Обновить токен")])]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showNotice,expression:"showNotice"}],staticClass:"page-profile__notice"},[s("i",{staticClass:"notice__icon"}),s("p",[e._v(e._s(e.noticeMsg))])])]),s("hr"),s("h2",{staticClass:"page-profile__title mt-6"},[e._v("Настройки скролла")]),s("div",{staticClass:"page-profile__scroll d-flex"},[s("t-field",{staticClass:"mr-4",attrs:{label:"Ширина (px)"}},[s("TInputNew",{attrs:{error:e.errScrollSize},model:{value:e.scroll.size,callback:function(t){e.$set(e.scroll,"size",e._n(t))},expression:"scroll.size"}})],1),s("t-field",{staticClass:"mr-4",attrs:{label:"Цвет (hex)"}},[s("TInputNew",{attrs:{error:e.errScrollBackground},model:{value:e.scroll.background,callback:function(t){e.$set(e.scroll,"background","string"===typeof t?t.trim():t)},expression:"scroll.background"}})],1),s("t-field",{staticClass:"mr-4",attrs:{label:"Прозрачность"}},[s("TInputNew",{attrs:{error:e.errScrollOpacity},model:{value:e.scroll.opacity,callback:function(t){e.$set(e.scroll,"opacity",e._n(t))},expression:"scroll.opacity"}})],1)],1),s("div",{staticClass:"page-profile__btns"},[s("d-button",{staticClass:"btn",attrs:{disabled:e.isScrollDisabled},on:{click:e.onSaveScroll}},[e._v("Сохранить")])],1),s("hr")],1)},i=[],r=s("1da1"),n=s("5530"),o=(s("96cf"),s("2f62")),l=s("002d"),c={name:"Profile",components:{TInputNew:l["a"]},data:function(){return{isChanged:!1,showNotice:!1,noticeMsg:"",errFirst:"",errLast:"",isLoading:!1,scroll:{background:"#242f3d",opacity:1,size:"4px"}}},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])({user:"projects/getUser"})),{},{firstName:{set:function(e){this.$store.commit("projects/SET_USER",{first_name:e})},get:function(){return this.user.first_name}},lastName:{set:function(e){this.$store.commit("projects/SET_USER",{last_name:e})},get:function(){return this.user.last_name}},errScrollSize:function(){var e=this.scroll.size;return e>0&&e<99?"":"От 1 до 99"},errScrollBackground:function(){var e=this.scroll.background;return/^#([0-9A-F]{3}){1,2}$/i.test(e)?"":"Цвет должен быть в hex формате (#FFFFFF)"},errScrollOpacity:function(){var e=this.scroll.opacity;return e>=0&&e<=1?"":"От 0 до 1"},isScrollDisabled:function(){return Boolean(this.errScrollSize||this.errScrollBackground||this.errScrollOpacity)}}),methods:{copy:function(){var e=window.getSelection(),t=document.createRange();t.selectNodeContents(this.$refs.token),e.removeAllRanges(),e.addRange(t),document.execCommand("copy"),e.removeAllRanges(),document.querySelector(".copy-msg").textContent="Token скопирован в буфер обмена"},updateToken:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("axios",{url:"/profile/update_token/"});case 2:s=t.sent,s.success&&(e.$refs.token.textContent=s.data.new_token,e.$store.dispatch("messages/setMessage",{message:"Ваш token успешно обновлен"}));case 4:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.firstName||(e.errFirst="Поле обязательно для заполнения"),e.lastName||(e.errLast="Поле обязательно для заполнения"),!e.firstName||!e.lastName){t.next=9;break}return e.isLoading=!0,t.next=6,e.$store.dispatch("profile/save",{first_name:e.firstName,last_name:e.lastName});case 6:s=t.sent,e.isLoading=!1,s.success&&e.$store.dispatch("messages/setMessage",{message:"Ваши данные успешно изменены"});case 9:case"end":return t.stop()}}),t)})))()},onSaveScroll:function(){localStorage.setItem("settingsScroll",JSON.stringify(this.scroll))}},mounted:function(){var e=localStorage.getItem("settingsScroll");if(e)try{this.scroll=JSON.parse(e)}catch(t){console.log(t)}},watch:{firstName:function(){this.isChanged=!0},lastName:function(){this.isChanged=!0}}},u=c,p=(s("509b"),s("2877")),d=Object(p["a"])(u,a,i,!1,null,"353660fa",null);t["default"]=d.exports},"509b":function(e,t,s){"use strict";s("31b2")},a5a4:function(e,t,s){}}]);