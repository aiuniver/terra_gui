(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6ac44d0e"],{"34e2":function(t,e,s){"use strict";s("a0b2")},a0b2:function(t,e,s){},c66d:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"page-profile"},[s("p",{staticClass:"page-profile__title"},[t._v("Мой профиль")]),s("div",{staticClass:"page-profile__block"},[s("t-input-new",{attrs:{label:"Имя",error:t.errFirst},on:{input:function(e){t.errFirst=""}},model:{value:t.firstName,callback:function(e){t.firstName="string"===typeof e?e.trim():e},expression:"firstName"}}),s("t-input-new",{attrs:{label:"Фамилия",error:t.errLast},on:{input:function(e){t.errLast=""}},model:{value:t.lastName,callback:function(e){t.lastName="string"===typeof e?e.trim():e},expression:"lastName"}})],1),s("div",{staticClass:"page-profile__btns"},[s("t-button",{staticClass:"btn",attrs:{loading:t.isLoading,disabled:t.isLoading},on:{click:t.save}},[t._v("Сохранить")])],1),s("hr"),s("div",{staticClass:"page-profile__block"},[s("div",{staticClass:"page-profile__block--contact"},[s("p",{staticClass:"page-profile__label"},[t._v("Логин")]),s("p",{staticClass:"page-profile__text"},[t._v(t._s(t.user.login))])]),s("div",{staticClass:"page-profile__block--contact"},[s("p",{staticClass:"page-profile__label"},[t._v("E-mail")]),s("p",{staticClass:"page-profile__text"},[t._v(t._s(t.user.email))])])]),s("hr"),s("div",{staticClass:"page-profile__token"},[s("p",{staticClass:"page-profile__label"},[t._v("Token")]),s("p",{staticClass:"page-profile__text"},[s("span",{ref:"token"},[t._v(t._s(t.user.token))]),s("i",{staticClass:"btn-copy",on:{click:t.copy}}),s("span",{staticClass:"copy-msg"})]),s("div",{staticClass:"btn-text",on:{click:t.updateToken}},[t._v("Обновить токен")])]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showNotice,expression:"showNotice"}],staticClass:"page-profile__notice"},[s("i",{staticClass:"notice__icon"}),s("p",[t._v(t._s(t.noticeMsg))])])]),s("hr"),s("h2",{staticClass:"page-profile__title mt-6"},[t._v("Настройки скролла")]),s("div",{staticClass:"page-profile__scroll d-flex"},[s("t-field",{staticClass:"mr-4",attrs:{label:"Ширина (px)"}},[s("t-input-new",{attrs:{error:t.errScrollSize},model:{value:t.scroll.size,callback:function(e){t.$set(t.scroll,"size",t._n(e))},expression:"scroll.size"}})],1),s("t-field",{staticClass:"mr-4",attrs:{label:"Цвет (hex)"}},[s("t-input-new",{attrs:{error:t.errScrollBackground},model:{value:t.scroll.background,callback:function(e){t.$set(t.scroll,"background","string"===typeof e?e.trim():e)},expression:"scroll.background"}})],1),s("t-field",{staticClass:"mr-4",attrs:{label:"Прозрачность"}},[s("t-input-new",{attrs:{error:t.errScrollOpacity},model:{value:t.scroll.opacity,callback:function(e){t.$set(t.scroll,"opacity",t._n(e))},expression:"scroll.opacity"}})],1)],1),s("div",{staticClass:"page-profile__btns"},[s("t-button",{staticClass:"btn",attrs:{disabled:t.isScrollDisabled},on:{click:t.onSaveScroll}},[t._v("Сохранить")])],1),s("hr")],1)},r=[],i=s("1da1"),o=s("5530"),n=(s("96cf"),s("2f62")),l={name:"Profile",data:function(){return{isChanged:!1,showNotice:!1,noticeMsg:"",errFirst:"",errLast:"",isLoading:!1,scroll:{background:"#242f3d",opacity:1,size:"4px"}}},computed:Object(o["a"])(Object(o["a"])({},Object(n["c"])({user:"projects/getUser"})),{},{firstName:{set:function(t){this.$store.commit("projects/SET_USER",{first_name:t})},get:function(){return this.user.first_name}},lastName:{set:function(t){this.$store.commit("projects/SET_USER",{last_name:t})},get:function(){return this.user.last_name}},errScrollSize:function(){var t=this.scroll.size;return t>0&&t<99?"":"От 1 до 99"},errScrollBackground:function(){var t=this.scroll.background;return/^#([0-9A-F]{3}){1,2}$/i.test(t)?"":"Цвет должен быть в hex формате (#FFFFFF)"},errScrollOpacity:function(){var t=this.scroll.opacity;return t>=0&&t<=1?"":"От 0 до 1"},isScrollDisabled:function(){return Boolean(this.errScrollSize||this.errScrollBackground||this.errScrollOpacity)}}),methods:{copy:function(){var t=window.getSelection(),e=document.createRange();e.selectNodeContents(this.$refs.token),t.removeAllRanges(),t.addRange(e),document.execCommand("copy"),t.removeAllRanges(),document.querySelector(".copy-msg").textContent="Token скопирован в буфер обмена"},updateToken:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("axios",{url:"/profile/update_token/"});case 2:s=e.sent,s.success&&(t.$refs.token.textContent=s.data.new_token,t.$store.dispatch("messages/setMessage",{message:"Ваш token успешно обновлен"}));case 4:case"end":return e.stop()}}),e)})))()},save:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.firstName||(t.errFirst="Поле обязательно для заполнения"),t.lastName||(t.errLast="Поле обязательно для заполнения"),!t.firstName||!t.lastName){e.next=9;break}return t.isLoading=!0,e.next=6,t.$store.dispatch("profile/save",{first_name:t.firstName,last_name:t.lastName});case 6:s=e.sent,t.isLoading=!1,s.success&&t.$store.dispatch("messages/setMessage",{message:"Ваши данные успешно изменены"});case 9:case"end":return e.stop()}}),e)})))()},onSaveScroll:function(){localStorage.setItem("settingsScroll",JSON.stringify(this.scroll))}},mounted:function(){var t=localStorage.getItem("settingsScroll");if(t)try{this.scroll=JSON.parse(t)}catch(e){console.log(e)}},watch:{firstName:function(){this.isChanged=!0},lastName:function(){this.isChanged=!0}}},c=l,p=(s("34e2"),s("2877")),u=Object(p["a"])(c,a,r,!1,null,"458a2a8a",null);e["default"]=u.exports}}]);