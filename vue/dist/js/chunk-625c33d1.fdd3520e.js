(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-625c33d1"],{"0ae7":function(t,e,n){"use strict";n("eca8")},"0bab":function(t,e,n){},"0e99":function(t,e,n){},"10e7":function(t,e,n){"use strict";n("18da")},1307:function(t,e,n){},"18da":function(t,e,n){},"234b":function(t,e,n){},"24ac":function(t,e,n){"use strict";n("92c8")},"280f":function(t,e,n){"use strict";n("6380")},"3af6":function(t,e,n){},4388:function(t,e,n){"use strict";n("3af6")},"45ac":function(t,e,n){},"46dc":function(t,e,n){"use strict";n("f4d9")},4871:function(t,e,n){},5123:function(t,e,n){"use strict";n("97c4")},6380:function(t,e,n){},7066:function(t,e,n){"use strict";n("1307")},8053:function(t,e,n){"use strict";n("e635")},"8ae2":function(t,e,n){"use strict";n("aba2")},"92c8":function(t,e,n){},"97c4":function(t,e,n){},a143:function(t,e,n){"use strict";n("0bab")},aba2:function(t,e,n){},b707:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"page-training"},[n("div",{staticClass:"cont"},[n("Toolbar",{attrs:{collabse:t.collabse}}),n("Graphics",{on:{collabse:function(e){t.collabse=e}}}),n("Params")],1)])},s=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbar"},[n("ul",{staticClass:"toolbar__menu"},t._l(t.items,(function(e,a){var s=e.title,i=e.disabled,r=e.icon;return n("li",{key:"items_"+a,class:["toolbar__menu--item"],attrs:{disabled:i},on:{click:function(e){return t.click(a)}}},[n("i",{class:["t-icon",r,{active:t.collapse.includes(a.toString())}],attrs:{title:s}})])})),0)])},r=[],o=n("5530"),c=(n("d3b7"),n("25f0"),n("caad"),n("2532"),n("4de4"),n("2f62")),l={name:"Toolbar",data:function(){return{}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({items:"trainings/getToolbar"})),{},{collapse:{set:function(t){this.$store.dispatch("trainings/setСollapse",t)},get:function(){return this.$store.getters["trainings/getСollapse"]}}}),created:function(){console.log(this.$store.getters["trainings/getСollapse"])},methods:{click:function(t){var e=t.toString();this.collapse.includes(e)?this.collapse=this.collapse.filter((function(t){return t!==e})):this.collapse.push(e)}}},u=l,d=(n("7066"),n("2877")),h=Object(d["a"])(u,i,r,!1,null,"66d45b19",null),p=h.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"board"},[n("scrollbar",{attrs:{ops:{scrollPanel:{scrollingX:!1}}}},[n("div",{staticClass:"wrapper"},[n("at-collapse",{staticClass:"mt-3",attrs:{value:t.collapse},on:{"on-change":t.change}},[n("at-collapse-item",{staticClass:"mt-3",attrs:{title:"Прогресс обучения",center:""}},[n("Progress",{attrs:{outputs:t.outputs,interactive:t.interactive}})],1),n("at-collapse-item",{staticClass:"mt-3",attrs:{title:"Метрики",center:""}},[n("Graphs",{attrs:{metric:"metric_graphs",outputs:t.outputs,interactive:t.interactive}})],1),n("at-collapse-item",{staticClass:"mt-3",attrs:{title:"Лоссы",center:""}},[n("Graphs",{attrs:{metric:"loss_graphs",outputs:t.outputs,interactive:t.interactive}})],1),n("at-collapse-item",{staticClass:"mt-3",attrs:{title:"Промежуточные результаты",center:""}},[n("Prediction",{attrs:{outputs:t.outputs,interactive:t.interactive}})],1),n("at-collapse-item",{staticClass:"mt-3",attrs:{title:"Таблица прогресса обучения",center:""}},[n("Texts",{attrs:{outputs:t.outputs,interactive:t.interactive}})],1),n("at-collapse-item",{staticClass:"mt-3",attrs:{title:"Статистические данные",center:""}},[n("Stats",{attrs:{outputs:t.outputs,interactive:t.interactive}})],1),n("at-collapse-item",{staticClass:"mt-3",staticStyle:{position:"relative"},attrs:{title:"Баланс данных",center:""}},[n("Balance",{attrs:{outputs:t.outputs,interactive:t.interactive}})],1)],1)],1)]),n("LargeImage",{directives:[{name:"show",rawName:"v-show",value:t.largeImg,expression:"largeImg"}]})],1)},_=[],f=(n("3ca3"),n("ddb0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-texts"},[n("div",{staticClass:"t-texts__header"},t._l(t.layers,(function(e,a){return n("div",{key:"layer_"+a,staticClass:"t-texts__block"},[n("p",[t._v(t._s(e))]),n("t-field",{attrs:{inline:"",label:"loss"}},[n("t-checkbox-new",{attrs:{value:!0,name:"loss"},on:{change:function(n){return t.change(e,n)}}})],1),n("t-field",{attrs:{inline:"",label:"metrics"}},[n("t-checkbox-new",{attrs:{value:!0,name:"metrics"},on:{change:function(n){return t.change(e,n)}}})],1)],1)})),0),n("div",{staticClass:"t-texts__content"},[n("Table",{attrs:{data:t.data,settings:t.settings}})],1),t.isData?t._e():n("div",{staticClass:"t-progress__overlay"},[t.isLearning?n("LoadSpiner",{attrs:{text:"Загрузка данных..."}}):t._e()],1)])}),v=[],g=(n("07ac"),n("b0c0"),n("159b"),n("1636")),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-table"},[n("scrollbar",{attrs:{ops:t.ops}},[t.isTable?n("table",[n("thead",[n("tr",{staticClass:"outputs_heads"},[n("th",{attrs:{rowspan:"2"}},[t._v("Эпоха")]),n("th",{attrs:{rowspan:"2"}},[t._v(" Время "),n("br"),t._v(" (сек.) ")]),t._l(t.outputs,(function(e,a){return[n("th",{directives:[{name:"show",rawName:"v-show",value:t.isShow(a),expression:"isShow(key)"}],key:a,attrs:{colspan:"100%"}},[t._v(" "+t._s(a)+" ")])]}))],2),n("tr",{staticClass:"callbacks_heads"},[t._l(t.outputs,(function(e,a){return[t._l(e,(function(e,s){return[t._l(e,(function(e,i){return[n("th",{directives:[{name:"show",rawName:"v-show",value:t.isShow(a,s),expression:"isShow(keyO, keyI)"}],key:s+i+a},[t._v(t._s(i))])]}))]}))]}))],2)]),n("tbody",t._l(t.data,(function(e,a,s){var i=e.time,r=e.data;return n("tr",{key:"epoch_"+s},[n("td",{staticClass:"epoch_num"},[t._v(t._s(a))]),n("td",[t._v(t._s(t._f("ceil")(i)))]),t._l(r,(function(e,a){return[t._l(e,(function(e,s){return[t._l(e,(function(e,i){return[n("td",{directives:[{name:"show",rawName:"v-show",value:t.isShow(a,s),expression:"isShow(keyO, keyM)"}],key:a+"t"+s+"r"+i,staticClass:"value"},[n("span",[t._v(t._s(e))])])]}))]}))]}))],2)})),0),n("tfoot",[n("tr",[n("th",{attrs:{colspan:"100%"}},[t._v(t._s("summary"))])])])]):t._e()])],1)},y=[],w=(n("fb6a"),n("b680"),{name:"t-table",props:{data:{type:Object,default:function(){}},settings:{type:Object,default:function(){}}},data:function(){return{ops:{scrollPanel:{scrollingX:!0,scrollingY:!1}}}},mounted:function(){console.log(this.settings)},computed:{isTable:function(){var t;return!(null===(t=this.data)||void 0===t||!t[1])},outputs:function(){var t,e;return(null===(t=this.data)||void 0===t||null===(e=t[1])||void 0===e?void 0:e.data)||{}}},filters:{int:function(t){return~~t},ceil:function(t){return Math.ceil(t)},drob:function(t){return(t%1).toFixed(9).slice(2)}},methods:{isShow:function(t,e){var n,a,s,i,r,o,c,l,u;return t&&e?null===(n=null===(a=this.settings)||void 0===a||null===(s=a[t])||void 0===s?void 0:s[e])||void 0===n||n:null===(i=null===(r=this.settings)||void 0===r||null===(o=r[t])||void 0===o?void 0:o.loss)||void 0===i||i||null===(c=null===(l=this.settings)||void 0===l||null===(u=l[t])||void 0===u?void 0:u.metrics)||void 0===c||c}}}),x=w,k=(n("24ac"),Object(d["a"])(x,b,y,!1,null,"a348cb38",null)),C=k.exports,O={name:"Texts",components:{Table:C,LoadSpiner:g["default"]},data:function(){return{settings:{},ops:{scrollPanel:{scrollingX:!1,scrollingY:!1}}}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({status:"trainings/getStatus"})),{},{isLearning:function(){return["addtrain","training"].includes(this.status)},layers:function(){var t,e,n=(null===(t=this.data)||void 0===t||null===(e=t["1"])||void 0===e?void 0:e.data)||{},a=[];for(var s in n)a.push(s);return a},data:function(){return this.$store.getters["trainings/getTrainData"]("progress_table")||{}},isData:function(){return Object.values(this.data).length}}),methods:{change:function(t,e){var n=e.name,a=e.value;this.settings[t]||(this.settings[t]={}),this.settings[t][n]=a,this.settings=Object(o["a"])({},this.settings),console.log(this.settings)}},created:function(){var t=this;this.layers.forEach((function(e){t.settings[e]={loss:!0,metrics:!0}}))}},j=O,S=(n("5123"),Object(d["a"])(j,f,v,!1,null,"08e59084",null)),$=S.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-progress"},["start"!==t.statusTrain||t.isEmpty?t._e():n("div",{staticClass:"t-progress__overlay"},[n("LoadSpiner",{attrs:{text:"Загрузка данных..."}})],1),n("div",{staticClass:"t-progress__item t-progress__item--timers"},[n("Timers",t._b({},"Timers",t.timings,!1))],1),n("div",{staticClass:"t-progress__item t-progress__item--info"},[n("Sysinfo",t._b({},"Sysinfo",t.usage,!1))],1)])},E=[],P=(n("b64b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-sysinfo"},[n("div",{staticClass:"t-sysinfo__label"},[t._v("Информация об устройстве")]),n("div",{staticClass:"t-sysinfo__grid"},[t.GPU.gpu_utilization?n("div",[n("div",{staticClass:"t-sysinfo__grid--item"},[t._v("GPU")]),n("div",{class:["t-sysinfo__grid--item",t.isWarning(t.GPU.gpu_utilization)]},[n("p",{staticClass:"t-sysinfo__gpu-name"},[t._v(t._s(t.GPU.gpu_name))]),n("p",[t._v(t._s(t.GPU.gpu_utilization+"% ("+t.GPU.gpu_memory_used+" / "+t.GPU.gpu_memory_total+")"))]),n("div",{staticClass:"t-sysinfo__progress-bar"},[n("div",{staticClass:"t-sysinfo__progress-bar--fill",style:{width:t.GPU.gpu_utilization+"%"}})])])]):t._e(),t.CPU.cpu_utilization?n("div",[n("div",{staticClass:"t-sysinfo__grid--item"},[t._v("CPU")]),n("div",{class:["t-sysinfo__grid--item",t.isWarning(t.CPU.cpu_utilization)]},[n("p",[t._v(t._s((t.CPU.cpu_utilization||0)+"%"))]),n("div",{staticClass:"t-sysinfo__progress-bar"},[n("div",{staticClass:"t-sysinfo__progress-bar--fill",style:{width:(t.CPU.cpu_utilization||0)+"%"}})])])]):t._e(),n("div",[n("div",{staticClass:"t-sysinfo__grid--item"},[t._v("RAM")]),n("div",{class:["t-sysinfo__grid--item",t.isWarning(t.RAM.ram_utilization)]},[n("p",[t._v(t._s(t.RAM.ram_utilization+"% ("+t.RAM.ram_memory_used+" / "+t.RAM.ram_memory_total+")"))]),n("div",{staticClass:"t-sysinfo__progress-bar"},[n("div",{staticClass:"t-sysinfo__progress-bar--fill",style:{width:t.RAM.ram_utilization+"%"}})])])]),n("div",[n("div",{staticClass:"t-sysinfo__grid-item"},[t._v("Disk")]),n("div",{class:["t-sysinfo__grid-item",t.isWarning(t.Disk.disk_utilization)]},[n("p",[t._v(t._s(t.Disk.disk_utilization+"% ("+t.Disk.disk_memory_used+" / "+t.Disk.disk_memory_total+")")+" ")]),n("div",{staticClass:"t-sysinfo__progress-bar"},[n("div",{staticClass:"t-sysinfo__progress-bar--fill",style:{width:t.Disk.disk_utilization+"%"}})])])])])])}),L=[],D={name:"",props:{Disk:{type:Object,default:function(){return{disk_utilization:0,disk_memory_total:0,disk_memory_used:0}}},GPU:{type:Object,default:function(){return{gpu_utilization:0,gpu_memory_total:0,gpu_memory_used:0}}},CPU:{type:Object,default:function(){return{cpu_utilization:0,cpu_memory_total:0,cpu_memory_used:0}}},RAM:{type:Object,default:function(){return{ram_utilization:0,ram_memory_total:0,ram_memory_used:0}}}},methods:{isEmptyAll:function(){return this.isEmpty(this.Disk)&&(this.isEmpty(this.GPU)||this.isEmpty(this.CPU))&&this.isEmpty(this.RAM)},isEmpty:function(t){return!!t&&0!==Object.keys(t).length},isWarning:function(t){var e=t?+t:0;return e>80?"warning":e>50?"info":""}}},M=D,A=(n("8053"),Object(d["a"])(M,P,L,!1,null,"735fd51a",null)),R=A.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-time"},[n("div",{staticClass:"t-time__train"},[n("div",{staticClass:"t-time__timer-wrapper"},[n("div",{staticClass:"t-time__timer"},[n("span",[t._v("Расчетное время обучения")]),n("div",[t._v(t._s(t.formatTime(t.estimated_time)))])]),n("div",{staticClass:"t-time__timer"},[n("span",[t._v("Прошло времени")]),n("div",[t._v(t._s(t.formatTime(t.elapsed_time)))])]),n("div",{staticClass:"t-time__timer"},[n("span",[t._v("Время до окончания обучения")]),n("div",[t._v(t._s(t.formatTime(t.still_time)))])]),n("div",{staticClass:"t-time__timer"},[n("span",[t._v("Эпоха")]),n("div",[t._v(t._s(t.epoch.current||0))]),n("i",[t._v("/")]),n("div",[t._v(t._s(t.epoch.total||0))])])]),n("div",{staticClass:"t-time__progress-bar"},[n("div",{staticClass:"t-time__progress-bar--fill",style:t.total(t.epoch)})])]),n("div",{staticClass:"t-time__age"},[n("div",{staticClass:"t-time__timer-wrapper"},[n("div",{staticClass:"t-time__timer"},[n("span",[t._v("Среднее время эпохи")]),n("div",[t._v(t._s(t.formatTime(t.avg_epoch_time)))])]),n("div",{staticClass:"t-time__timer"},[n("span",[t._v("Прошло времени на эпоху")]),n("div",[t._v(t._s(t.formatTime(t.elapsed_epoch_time)))])]),n("div",{staticClass:"t-time__timer"},[n("span",[t._v("Время до окончания текущей эпохи")]),n("div",[t._v(t._s(t.formatTime(t.still_epoch_time)))])]),n("div",{staticClass:"t-time__timer"},[n("span",[t._v("Батч")]),n("div",[t._v(t._s(t.batch.current||0))]),n("i",[t._v("/")]),n("div",[t._v(t._s(t.batch.total||0))])])]),n("div",{staticClass:"t-time__progress-bar"},[n("div",{staticClass:"t-time__progress-bar--fill",style:t.total(t.batch)})])])])},G=[],U=(n("a9e3"),n("99af"),{name:"t-train-time",props:{avg_epoch_time:{type:Number,default:0},elapsed_epoch_time:{type:Number,default:0},elapsed_time:{type:Number,default:0},estimated_time:{type:Number,default:0},still_epoch_time:{type:Number,default:0},still_time:{type:Number,default:0},batch:{type:Object,default:function(){return{current:0,total:0}}},epoch:{type:Object,default:function(){return{current:0,total:0}}}},methods:{total:function(t){var e=t.total,n=t.current,a=Math.round(100*n/e);return a=isNaN(a)?0:a,a>100&&(a=100),{width:a+"%"}},formatTime:function(t){return"".concat(Math.floor(t/3600),"h : ").concat(Math.floor(t%3600/60),"m : ").concat(Math.floor(t%3600%60),"s")}}}),N=U,B=(n("dea1"),Object(d["a"])(N,z,G,!1,null,"38408fea",null)),I=B.exports,Y={name:"t-progress",components:{Sysinfo:R,Timers:I,LoadSpiner:g["default"]},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({status:"trainings/getStatus"})),{},{isLearning:function(){return["addtrain","training"].includes(this.status)},isEmpty:function(){return console.log(Object.keys(this.lossGraphs).length),Object.keys(this.lossGraphs).length},lossGraphs:function(){return this.$store.getters["trainings/getTrainUsage"]||{}},usage:function(){var t;return(null===(t=this.lossGraphs)||void 0===t?void 0:t.hard_usage)||{}},timings:function(){var t;return(null===(t=this.lossGraphs)||void 0===t?void 0:t.timings)||{}},statusTrain:function(){return this.$store.getters["trainings/getStatusTrain"]}}),mounted:function(){console.log(this.data)}},V=Y,W=(n("c50c"),Object(d["a"])(V,T,E,!1,null,"ab46eb80",null)),H=W.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-statistic"},[n("div",{staticClass:"t-statistic__header"},[n("div",{staticClass:"t-statistic__checks"},[t._l(t.outputLayers,(function(e,a){var s=e.id,i=e.value;return[n("t-field",{key:"check_"+a,attrs:{inline:"",label:"Выходной слой «"+s+"»"}},[n("t-checkbox-new",{attrs:{small:"",value:i},on:{change:function(e){return t.change({id:s,value:e.value})}}})],1)]}))],2),t.isYolo?n("div",[n("t-field",{attrs:{inline:"",label:"Чувствительность"}},[n("t-input-new",{staticStyle:{width:"109px"},attrs:{type:"number",small:""},on:{change:t.send},model:{value:t.settings.sensitivity,callback:function(e){t.$set(t.settings,"sensitivity",t._n(e))},expression:"settings.sensitivity"}})],1),n("t-field",{attrs:{inline:"",label:"Порог отображения"}},[n("t-input-new",{staticStyle:{width:"109px"},attrs:{type:"number",small:""},on:{change:t.send},model:{value:t.settings.threashold,callback:function(e){t.$set(t.settings,"threashold",t._n(e))},expression:"settings.threashold"}})],1),n("t-field",{attrs:{inline:"",label:"Бокс-канал"}},[n("t-select-new",{attrs:{list:t.numOutput,small:""},on:{change:t.send},model:{value:t.settings.box_channel,callback:function(e){t.$set(t.settings,"box_channel",e)},expression:"settings.box_channel"}})],1)],1):t._e(),n("div",[n("t-field",{attrs:{inline:"",label:"Автообновление"}},[n("t-checkbox-new",{attrs:{small:""},on:{change:t.send},model:{value:t.settings.autoupdate,callback:function(e){t.$set(t.settings,"autoupdate",e)},expression:"settings.autoupdate"}})],1)],1)]),n("div",{staticClass:"t-statistic__content"},[t._l(t.statisticData,(function(e,a){return[n(t.component(e.type),t._b({key:"layer.type"+a,tag:"component"},"component",e,!1))]})),t.isLearning&&t.ids.length&&!Object.keys(t.statisticData).length?n("LoadSpiner",{staticClass:"overlay",attrs:{text:"Загрузка данных..."}}):t._e()],2)])},J=[],F=n("1da1"),K=n("2909"),q=(n("96cf"),n("d81d"),n("e9c4"),{name:"t-statistic",components:{Colormap:function(){return n.e("chunk-40b98f86").then(n.bind(null,"a905"))},Heatmap:function(){return n.e("chunk-635203b4").then(n.bind(null,"f2ca"))},Corheatmap:function(){return n.e("chunk-7097279d").then(n.bind(null,"2dcd"))},Valheatmap:function(){return n.e("chunk-12bed4a6").then(n.bind(null,"97b8"))},Scatter:function(){return n.e("chunk-7a1dd236").then(n.bind(null,"c39f"))},Histogram:function(){return n.e("chunk-d2ab788e").then(n.bind(null,"c2c8"))},Bar:function(){return n.e("chunk-d2ab788e").then(n.bind(null,"c2c8"))},STable:function(){return n.e("chunk-27c6daa8").then(n.bind(null,"ba81"))},Graphic:function(){return n.e("chunk-00f3e039").then(n.bind(null,"1dc7"))},LoadSpiner:g["default"]},props:{outputs:Array},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({status:"trainings/getStatus",architecture:"trainings/getArchitecture"})),{},{isYolo:function(){return["YoloV4","YoloV3"].includes(this.architecture)},isLearning:function(){return["addtrain","training"].includes(this.status)},settings:{set:function(t){this.$store.dispatch("trainings/setObjectInteractive",{statistic_data:t})},get:function(){return this.$store.getters["trainings/getObjectInteractive"]("statistic_data")}},statisticData:function(){return this.$store.getters["trainings/getTrainData"]("statistic_data")||{}},outputLayers:function(){var t=this;return this.outputs.map((function(e){return{id:e.id,value:t.ids.includes(e.id)}}))},numOutput:function(){return this.outputs.map((function(t,e){return{label:"".concat(e),value:e}}))},ids:function(){return JSON.parse(JSON.stringify(this.settings.output_id||[]))}}),methods:{component:function(t){return"table"===t?"s-table":t},change:function(t){var e=t.id,n=t.value;this.settings.output_id=n?[].concat(Object(K["a"])(this.ids),[e]):Object(K["a"])(this.ids.filter((function(t){return t!==e}))),this.send()},send:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("trainings/interactive",{});case 2:case"end":return e.stop()}}),e)})))()}}}),Q=q,Z=(n("280f"),Object(d["a"])(Q,X,J,!1,null,"8c9d8ee8",null)),tt=Z.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-balance"},[n("div",{staticClass:"t-balance__header"},[n("div",{staticClass:"t-balance__wrapper"},[n("div",{staticClass:"t-balance__checks"},[n("t-field",{attrs:{inline:"",label:"Показать тренировочную выборку"}},[n("t-checkbox-new",{attrs:{name:"show_train"},on:{change:t.change},model:{value:t.settings.show_train,callback:function(e){t.$set(t.settings,"show_train",e)},expression:"settings.show_train"}})],1),n("t-field",{attrs:{inline:"",label:"Показать проверочную выборку"}},[n("t-checkbox-new",{attrs:{name:"show_val"},on:{change:t.change},model:{value:t.settings.show_val,callback:function(e){t.$set(t.settings,"show_val",e)},expression:"settings.show_val"}})],1)],1),n("t-field",{attrs:{inline:"",label:"Сортировать"}},[n("t-select-new",{attrs:{small:"",list:t.sortOps},on:{input:t.select},model:{value:t.settings.sorted,callback:function(e){t.$set(t.settings,"sorted",e)},expression:"settings.sorted"}})],1)],1)]),(t.settings.show_train||t.settings.show_val)&&Object.keys(t.dataDalance).length>0?n("div",{staticClass:"t-balance__graphs"},[t._l(t.filter(t.dataDalance),(function(e,a){var s=e.train,i=e.val;return[s?n(s.type,t._b({key:"train_"+a,tag:"component"},"component",s,!1)):t._e(),i?n(i.type,t._b({key:"val_"+a,tag:"component"},"component",i,!1)):t._e()]}))],2):t._e(),n("div",{staticClass:"t-balance__overlay"},[t.isLearning&&0===Object.keys(t.dataDalance).length?n("LoadSpiner",{attrs:{text:"Загрузка данных..."}}):t._e()],1)])},nt=[],at={name:"t-balance",components:{Colormap:function(){return n.e("chunk-40b98f86").then(n.bind(null,"a905"))},Heatmap:function(){return n.e("chunk-635203b4").then(n.bind(null,"f2ca"))},Corheatmap:function(){return n.e("chunk-7097279d").then(n.bind(null,"2dcd"))},Scatter:function(){return n.e("chunk-7a1dd236").then(n.bind(null,"c39f"))},Histogram:function(){return n.e("chunk-d2ab788e").then(n.bind(null,"c2c8"))},Bar:function(){return n.e("chunk-d2ab788e").then(n.bind(null,"c2c8"))},Table:function(){return n.e("chunk-27c6daa8").then(n.bind(null,"ba81"))},Graphic:function(){return n.e("chunk-00f3e039").then(n.bind(null,"1dc7"))},LoadSpiner:g["default"]},data:function(){return{selected:[],sortOps:[{label:"по имени",value:"alphabetic"},{label:"по увеличению",value:"ascending"},{label:"по убыванию",value:"descending"}]}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({status:"trainings/getStatus"})),{},{isLearning:function(){return["addtrain","training"].includes(this.status)},dataDalance:function(){return this.$store.getters["trainings/getTrainData"]("data_balance")||[]},settings:{set:function(t){this.$store.dispatch("trainings/setObjectInteractive",{data_balance:t})},get:function(){return this.$store.getters["trainings/getObjectInteractive"]("data_balance")}}}),methods:{filter:function(t){var e=this;return t.map((function(t){var n=t.val,a=t.train,s={};return e.settings.show_train&&(s.train=a),e.settings.show_val&&(s.val=n),s}))},change:function(){this.handleClick()},handleClick:function(){return Object(F["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))()},select:function(t){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return console.log(t),n.next=3,e.$store.dispatch("trainings/interactive",{data_balance:{sorted:t,show_val:e.settings.show_val,show_train:e.settings.show_train}});case 3:case"end":return n.stop()}}),n)})))()}}},st=at,it=(n("a143"),Object(d["a"])(st,et,nt,!1,null,"16cc54df",null)),rt=it.exports,ot=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"predictions"},[n("div",{staticClass:"predictions__params"},[n("div",{staticClass:"predictions__param"},[n("t-field",{attrs:{inline:"",label:"Данные для расчета"}},[n("t-select-new",{attrs:{list:t.sortData,small:""},on:{change:t.show},model:{value:t.example_choice_type,callback:function(e){t.example_choice_type=e},expression:"example_choice_type"}})],1),n("t-field",{attrs:{inline:"",label:"Тип выбора данных"}},[n("t-select-new",{attrs:{list:t.sortOutput,small:""},on:{change:t.show},model:{value:t.main_output,callback:function(e){t.main_output=e},expression:"main_output"}})],1),n("t-field",{attrs:{inline:"",label:"Тип выборки"}},[n("t-select-new",{attrs:{list:t.list,small:""},on:{change:t.show},model:{value:t.data_type,callback:function(e){t.data_type=e},expression:"data_type"}})],1),n("t-field",{attrs:{inline:"",label:"Показать примеров"}},[n("t-input-new",{staticStyle:{width:"109px"},attrs:{type:"number",small:"",error:t.isError},on:{change:t.show},model:{value:t.num_examples,callback:function(e){t.num_examples=t._n(e)},expression:"num_examples"}})],1)],1),t.isYolo?n("div",{staticClass:"predictions__param"},[n("t-field",{attrs:{inline:"",label:"Бокс-канал"}},[n("t-select-new",{attrs:{list:t.numOutput,small:""},on:{change:t.show},model:{value:t.box_channel,callback:function(e){t.box_channel=e},expression:"box_channel"}})],1),n("t-field",{attrs:{inline:"",label:"Чувствительность"}},[n("t-input-new",{staticStyle:{width:"109px"},attrs:{type:"number",small:""},on:{change:t.show},model:{value:t.sensitivity,callback:function(e){t.sensitivity=e},expression:"sensitivity"}})],1),n("t-field",{attrs:{inline:"",label:"Порог отображения"}},[n("t-input-new",{staticStyle:{width:"109px"},attrs:{type:"number",small:""},on:{change:t.show},model:{value:t.threashold,callback:function(e){t.threashold=e},expression:"threashold"}})],1)],1):t._e(),n("div",{staticClass:"predictions__param"},[n("t-field",{attrs:{inline:"",label:"Выводить промежуточные результаты"}},[n("t-checkbox-new",{attrs:{small:""},on:{change:t.show},model:{value:t.show_results,callback:function(e){t.show_results=e},expression:"show_results"}})],1),n("t-field",{attrs:{inline:"",label:"Показать статистику"}},[n("t-checkbox-new",{attrs:{small:""},on:{change:t.show},model:{value:t.show_statistic,callback:function(e){t.show_statistic=e},expression:"show_statistic"}})],1)],1),n("div",{staticClass:"predictions__param"}),n("div",{staticClass:"predictions__param"},[n("t-button",{staticStyle:{width:"150px"},attrs:{disabled:!!t.isError},nativeOn:{click:function(e){return t.show.apply(null,arguments)}}},[t._v(" "+t._s("Обновить")+" ")]),n("br"),n("t-field",{attrs:{inline:"",label:"Автообновление"}},[n("t-checkbox-new",{attrs:{small:""},on:{change:t.show},model:{value:t.autoupdate,callback:function(e){t.autoupdate=e},expression:"autoupdate"}})],1)],1)]),n("div",{staticClass:"predictions__body"},[t.isEmpty?n("PredictTable",{attrs:{predict:t.predictData,fixation:t.fixation,update:t.predictUpdate}}):n("div",{staticClass:"predictions__overlay"},[t.start&&t.isLearning?n("LoadSpiner",{attrs:{text:"Загрузка данных..."}}):t._e()],1)],1)])},ct=[],lt={name:"Predictions",components:{PredictTable:function(){return n.e("chunk-2e9457b5").then(n.bind(null,"a17a"))},LoadSpiner:function(){return Promise.resolve().then(n.bind(null,"1636"))}},props:{outputs:Array,interactive:Object},data:function(){return{start:!1,sortData:[{label:"Best",value:"best"},{label:"Worst",value:"worst"},{label:"Seed",value:"seed"},{label:"Random",value:"random"}],list:[{label:"Тренировочная",value:"train"},{label:"Проверочная",value:"val"}],autoupdate:!1,example_choice_type:"seed",main_output:2,data_type:"val",num_examples:10,show_results:!0,show_statistic:!0,fixation:!1,max:10,sensitivity:.12,box_channel:1,threashold:.1}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({status:"trainings/getStatus",architecture:"trainings/getArchitecture"})),{},{isYolo:function(){return["YoloV4","YoloV3"].includes(this.architecture)},isLearning:function(){return["addtrain","training"].includes(this.status)},isEmpty:function(){return Object.keys(this.predictData).length},sortOutput:function(){return this.outputs.map((function(t){return{label:"Выходной слой ".concat(t.id),value:t.id}}))},numOutput:function(){return this.outputs.map((function(t,e){return{label:"".concat(e),value:e}}))},update:function(){for(var t in this.settings)if(this[t]!==this.settings[t])return!0;return!1},isError:function(){var t=this.num_examples;return""===t?"Поле не может быть пустым":t>10?"Не больше 10 примеров":t<1?"Не меньше 1 примера":""},settings:function(){return this.$store.getters["trainings/getObjectInteractive"]("intermediate_result")},predictData:function(){return this.$store.getters["trainings/getTrainData"]("intermediate_result")||{}},predictUpdate:function(){return this.$store.getters["trainings/getTrainData"]("update")||""},statusTrain:function(){return this.$store.getters["trainings/getStatusTrain"]}}),methods:{show:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.isError){e.next=2;break}return e.abrupt("return");case 2:return t.start=t.settings.show_results,n={autoupdate:t.autoupdate,example_choice_type:t.example_choice_type,main_output:t.main_output,num_examples:t.num_examples>10?10:t.num_examples,show_results:t.show_results,show_statistic:t.show_statistic,data_type:t.data_type,sensitivity:t.sensitivity,box_channel:t.box_channel},e.next=6,t.$store.dispatch("trainings/interactive",{intermediate_result:n});case 6:case"end":return e.stop()}}),e)})))()}},created:function(){for(var t in this.settings)this[t]=this.settings[t];this.start=this.settings.show_results&&this.autoupdate}},ut=lt,dt=(n("c109"),Object(d["a"])(ut,ot,ct,!1,null,"eaef6cfa",null)),ht=dt.exports,pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-charts"},[n("div",{staticClass:"t-charts__content"},[n("TCharTemp",{staticClass:"t-chart",nativeOn:{click:function(e){return t.add.apply(null,arguments)}}}),t._l(t.charts,(function(e,a){return n("TChar",t._b({key:"char1_"+a,staticClass:"t-chart",attrs:{settings:e,menus:t.menus,start:t.isLearning,epochs:t.epochs},on:{event:function(n){return t.event(n,e)}}},"TChar",t.getChart(e),!1))}))],2)])},mt=[],_t=n("ade3"),ft=(n("7db0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-char",style:t.order},[n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.outside,expression:"outside"}],staticClass:"t-char__header"},[n("div",{staticClass:"t-char__header--roll"},[n("i",{class:["t-icon","icon-training-roll-down"],attrs:{title:"roll down"},on:{click:t.show}})]),n("div",{staticClass:"t-char__header--title"},[t._v(t._s(t.graph_name))]),t.progress_state?n("div",{class:["t-char__header--condition",t.progress_state]},[n("span",[t._v(t._s(t.progress_state))]),n("div",{staticClass:"indicator"})]):t._e(),n("div",{staticClass:"t-char__header--additionally"},[n("i",{class:["t-icon","icon-training-additionally"],attrs:{title:"roll down"},on:{click:function(e){t.popMenuShow=!t.popMenuShow}}}),t.popMenuShow?n("PopUpMenu",{attrs:{settings:t.settings,menus:t.menus,show:t.graphicShow},on:{event:t.event}}):t._e()],1)]),t.graphicShow?n("div",{staticClass:"t-char__main"},[n("Plotly",{attrs:{data:t.data,layout:t.layout,"display-mode-bar":!1}}),t.data.length?t._e():n("div",{staticClass:"t-char__empty"},[t.start?n("LoadSpiner",{attrs:{text:"Загрузка данных..."}}):t._e()],1)],1):t._e(),n("div")])}),vt=[],gt=(n("ac1f"),n("5319"),n("04d11")),bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"menu"},[n("li",{staticClass:"menu__item",on:{click:function(e){return t.$emit("event",{name:"general",data:"add"})}}},[t._v("Добавить график")]),n("li",{staticClass:"menu__item",on:{click:function(e){return t.$emit("event",{name:"general",data:"copy"})}}},[t._v("Копировать график")]),n("li",{staticClass:"menu__item",on:{click:function(e){return t.$emit("event",{name:"general",data:"hide"})}}},[t._v(" "+t._s(t.show?"Свернуть":"Развернуть")+" график ")]),n("li",{staticClass:"menu__item",on:{click:function(e){return t.$emit("event",{name:"general",data:"remove"})}}},[t._v("Удалить график")]),n("li",{staticClass:"menu__dropdown"},[n("i",{class:["t-icon","icon-training-dropdown"]}),n("span",[t._v("Показывать данные")]),n("ul",{staticClass:"menu"},[n("li",{staticClass:"menu__item",on:{click:function(e){return t.$emit("event",{name:"data",data:"model"})}}},[t._v("По всей модели")]),t.isClass?n("li",{staticClass:"menu__item",on:{click:function(e){return t.$emit("event",{name:"data",data:"classes"})}}},[t._v("По классам")]):t._e()])]),"loss_graphs"!==t.type?n("li",{staticClass:"menu__dropdown"},[n("i",{class:["t-icon","icon-training-dropdown"]}),n("span",[t._v("Показывать метрики")]),n("ul",{staticClass:"menu",staticStyle:{"max-height":"240px","overflow-y":"auto"}},[t._l(t.metrics,(function(e,a){return[n("li",{key:"metrics"+a,staticClass:"menu__item",on:{click:function(n){return t.$emit("event",{name:"metric",data:e})}}},[t._v(" "+t._s(e)+" ")])]}))],2)]):t._e(),n("li",{staticClass:"menu__dropdown"},[n("i",{class:["t-icon","icon-training-dropdown"]}),n("span",[t._v("Показывать выход")]),n("ul",{staticClass:"menu",staticStyle:{"max-height":"240px","overflow-y":"auto"}},[t._l(t.exits,(function(e,a){return[n("li",{key:"output"+a,staticClass:"menu__item",on:{click:function(n){return t.$emit("event",{name:"chart",data:e})}}},[t._v(" Выход "+t._s(e)+" ")])]}))],2)])])},yt=[],wt={name:"PopUpMenu",props:{menus:{type:Object,default:function(){}},settings:{type:Object,default:function(){}},show:Boolean},computed:{show_metric:function(){var t;return(null===(t=this.settings)||void 0===t?void 0:t.show_metric)||""},id:function(){var t;return(null===(t=this.settings)||void 0===t?void 0:t.output_idx)||0},isClass:function(){var t,e=(null===(t=this.menus)||void 0===t?void 0:t.isClass)||{};return e[this.id]},type:function(){var t;return(null===(t=this.menus)||void 0===t?void 0:t.type)||""},outputs:function(){var t;return(null===(t=this.menus)||void 0===t?void 0:t.outputs)||[]},exits:function(){return this.outputs.map((function(t){return t.id}))},metrics:function(){var t,e=this,n=(null===(t=this.outputs.find((function(t){return t.id===e.id})))||void 0===t?void 0:t.metrics)||[];return n}}},xt=wt,kt=(n("46dc"),Object(d["a"])(xt,bt,yt,!1,null,"9b062410",null)),Ct=kt.exports,Ot={name:"t-char",props:{id:Number,progress_state:{type:String,default:""},graph_name:{type:String,default:""},x_label:{type:String,default:""},y_label:{type:String,default:""},best:{type:Array,default:function(){return[]}},plot_data:{type:Array,default:function(){return[]}},epochs:{type:Array,default:function(){return[]}},type:{type:String,default:"lines"},settings:{type:Object,default:function(){}},menus:{type:Object,default:function(){}},start:Boolean},components:{Plotly:gt["Plotly"],PopUpMenu:Ct,LoadSpiner:g["default"]},data:function(){return{graphicShow:!0,popMenuShow:!1,defLayout:{autosize:!0,margin:{l:50,r:20,t:10,b:35,pad:0,autoexpand:!0},font:{color:"#A7BED3"},showlegend:!0,legend:{y:-.2,itemsizing:"constant",orientation:"h",font:{family:"Open Sans",color:"#A7BED3"}},paper_bgcolor:"transparent",plot_bgcolor:"transparent",title:{text:""},xaxis:{title:"",showgrid:!0,zeroline:!1,linecolor:"#A7BED3",gridcolor:"#0E1621",gridwidth:1},yaxis:{title:"",showgrid:!0,zeroline:!1,linecolor:"#A7BED3",gridcolor:"#0E1621",gridwidth:1}}}},computed:{order:function(){return{order:this.graphicShow?this.settings.id:998}},layout:function(){var t=this.defLayout;return this.plot_data&&(t.xaxis.title=this.x_label,t.yaxis.title=this.y_label),t},minValue:function(){var t;return Math.min.apply(Math,Object(K["a"])((t=[]).concat.apply(t,Object(K["a"])(this.plot_data.map((function(t){return t.y}))))))},maxValue:function(){var t;return Math.max.apply(Math,Object(K["a"])((t=[]).concat.apply(t,Object(K["a"])(this.plot_data.map((function(t){return t.y}))))))},endpointX:function(){return this.epochs.map((function(t){return[t,t,null]}))},endpointY:function(){var t=this;return this.epochs.map((function(){return[t.maxValue,t.minValue,null]}))},changeEpochs:function(){var t,e;return[{type:"scatter",x:(t=[]).concat.apply(t,Object(K["a"])(this.endpointX)),y:(e=[]).concat.apply(e,Object(K["a"])(this.endpointY)),mode:"line",name:"Остановка обучения",hoverinfo:"name",line:{color:"grey",width:2,dash:"dash"}}]},changeBest:function(){return this.best?this.best.map((function(t,e){var n=t.x,a=t.y,s=t.mode,i=void 0===s?"markers":s,r=t.label;return{x:n,y:a,mode:i,name:"".concat(r," ").concat(a[0]),marker:{color:["#1f77b4","#ff7f0e"][e],symbol:"circle",size:10}}})):[]},changePlotData:function(){return this.plot_data.map((function(t){var e=t.x,n=t.y,a=t.mode,s=void 0===a?"lines":a,i=t.label;return{x:e,y:n,mode:s,name:i.replace(/[<>]/g,"")}}))},data:function(){return[].concat(Object(K["a"])(this.changePlotData),Object(K["a"])(this.changeBest),Object(K["a"])(this.changeEpochs))}},mounted:function(){},methods:{event:function(t){var e=t.name,n=t.data;"hide"===n&&this.show(),this.$emit("event",{name:e,data:n}),this.popMenuShow=!1},show:function(){this.graphicShow&&(this.popMenuShow=!1),this.graphicShow=!this.graphicShow},outside:function(){this.popMenuShow=!1}}},jt=Ot,St=(n("10e7"),Object(d["a"])(jt,ft,vt,!1,null,"68abd47e",null)),$t=St.exports,Tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-char-temp"},[t._m(0),n("div",{staticClass:"t-char-temp__header"}),t.graphicShow?n("div",{staticClass:"t-char-temp__main"},[n("Plotly",{attrs:{data:t.data,layout:t.layout,"display-mode-bar":!1}})],1):t._e()])},Et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-char-temp__overflow"},[n("i",{staticClass:"t-icon icon-add-chart"}),t._v(" Добавить график ")])}],Pt={name:"t-char-temp",components:{Plotly:gt["Plotly"]},data:function(){return{dataList:["loss","Metrics"],metrics:["Accuracy","CategoricalHinge","KLDivergence"],char:{graph_name:"График",x_label:"Эпоха",y_label:"Значение",plot_data:[],progress_state:"underfitting"},graphicShow:!0,popMenuShow:!1,defLayout:{autosize:!0,margin:{l:50,r:20,t:10,b:35,pad:0,autoexpand:!0},font:{color:"#A7BED3"},showlegend:!0,legend:{y:-.2,itemsizing:"constant",orientation:"h",font:{family:"Open Sans",color:"#A7BED3"}},paper_bgcolor:"transparent",plot_bgcolor:"transparent",title:{text:""},xaxis:{title:"",showgrid:!0,zeroline:!1,linecolor:"#A7BED3",gridcolor:"#0E1621",gridwidth:1},yaxis:{title:"",showgrid:!0,zeroline:!1,linecolor:"#A7BED3",gridcolor:"#0E1621",gridwidth:1}}}},computed:{layout:function(){var t=this.defLayout;return this.char,t},data:function(){var t=this.char.plot_data||[],e=t.map((function(t){var e=t.epochs,n=t.values,a=t.mode,s=void 0===a?"lines":a,i=t.label;return{x:e,y:n,mode:s,name:i}}));return e}},methods:{handleMenu:function(t){console.log(t),this.popMenuShow=!1}},mounted:function(){console.log(this.char)}},Lt=Pt,Dt=(n("8ae2"),Object(d["a"])(Lt,Tt,Et,!1,null,"0b30caa8",null)),Mt=Dt.exports,At={name:"t-graphs",components:{TChar:$t,TCharTemp:Mt},props:{metric:String,outputs:Array,interactive:Object},data:function(){return{}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({chars:"trainings/getChars",status:"trainings/getStatus"})),{},{isLearning:function(){return["addtrain","training"].includes(this.status)},menus:function(){return{isClass:this.classGraphics,outputs:this.outputs,type:this.metric}},classGraphics:function(){return this.$store.getters["trainings/getTrainData"]("class_graphics")},epochs:function(){return this.$store.getters["trainings/getTrainData"]("addtrain_epochs")},charts:{set:function(t){console.log(t),this.$store.dispatch("trainings/setObjectInteractive",Object(_t["a"])({},this.metric,t))},get:function(){return this.$store.getters["trainings/getArrayInteractive"](this.metric)}},data:function(){return this.$store.getters["trainings/getTrainData"](this.metric)||[]},outputIdx:function(){return this.outputs.find((function(t){return t.id})).id},metrics:function(){var t,e;return null!==(t=null===(e=this.outputs)||void 0===e?void 0:e[0].metrics)&&void 0!==t?t:[]}}),mounted:function(){},methods:{event:function(t,e){var n=t.name,a=t.data,s=e.id;console.log(n,a,s),"add"===a&&this.add(),"remove"===a&&this.remove(s),"copy"===a&&this.copy(s),"chart"===n&&(this.charts=this.charts.map((function(t){return t.id===s&&(t.output_idx=a),t}))),"data"===n&&(this.charts=this.charts.map((function(t){return t.id===s&&(t.show=a),t}))),"metric"===n&&(this.charts=this.charts.map((function(t){return t.id===s&&(t.show_metric=a),t}))),this.send()},getChart:function(t){var e=t.id;return this.data.find((function(t){return t.id===e}))},add:function(){if(console.log(this.charts),this.charts.length<10){var t=Math.max.apply(Math,[0].concat(Object(K["a"])(this.charts.map((function(t){return t.id})))));"metric_graphs"===this.metric?this.charts.push({id:t+1,output_idx:this.outputIdx,show:"model",show_metric:this.metrics[0]}):this.charts.push({id:t+1,output_idx:this.outputIdx,show:"model"}),this.charts=Object(K["a"])(this.charts),this.send()}},copy:function(t){if(this.charts.length<10){var e=Math.max.apply(Math,[0].concat(Object(K["a"])(this.charts.map((function(t){return t.id}))))),n=Object(o["a"])({},this.charts.find((function(e){return e.id===t})));n&&(n.id=e+1,this.charts=[].concat(Object(K["a"])(this.charts),[n]))}},remove:function(t){this.charts=this.charts.filter((function(e){return e.id!==t}))},send:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("trainings/interactive",{});case 2:n=e.sent,console.log("response",n);case 4:case"end":return e.stop()}}),e)})))()}}},Rt=At,zt=(n("e59a"),Object(d["a"])(Rt,pt,mt,!1,null,"e84d4a00",null)),Gt=zt.exports,Ut={name:"Graphics",components:{Prediction:ht,Texts:$,Progress:H,Stats:tt,Balance:rt,Graphs:Gt,LargeImage:function(){return n.e("chunk-3f699920").then(n.bind(null,"831e"))}},data:function(){return{}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({largeImg:"trainings/getLargeImg"})),{},{collapse:{set:function(t){this.$store.dispatch("trainings/setСollapse",t)},get:function(){return this.$store.getters["trainings/getСollapse"]}},show:function(){return this.collabse.includes("0")},outputs:function(){return this.$store.getters["trainings/getOutputs"]},interactive:function(){return this.$store.getters["trainings/getInteractive"]}}),methods:{change:function(t){this.collabse=t,console.log(t)}}},Nt=Ut,Bt=(n("4388"),Object(d["a"])(Nt,m,_,!1,null,"1b3908e8",null)),It=Bt.exports,Yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"params"},["start"===t.statusTrain?n("div",{key:"fdgtr",staticClass:"params__overlay"},[n("LoadSpiner",{attrs:{text:"Запуск обучения..."}})],1):t._e(),n("scrollbar",[n("div",{staticClass:"params__body"},[n("div",{staticClass:"params__items"},[n("at-collapse",{key:t.key,attrs:{value:t.collapse},on:{"on-change":t.onchange}},t._l(t.params,(function(e,a){var s=e.visible,i=e.name,r=e.fields;return n("at-collapse-item",{directives:[{name:"show",rawName:"v-show",value:s,expression:"visible"}],key:a,staticClass:"mt-3",attrs:{name:a,title:i||""}},["outputs"!==a?n("div",{staticClass:"params__fields"},[t._l(r,(function(e,s){return[n("t-auto-field-trainings",t._b({key:a+s,class:"params__fields--"+a,attrs:{state:t.state,inline:!1},on:{parse:t.parse}},"t-auto-field-trainings",e,!1))]}))],2):n("div",{staticClass:"blocks-layers"},[t._l(r,(function(e,a){return[n("div",{key:"block_layers_"+a,staticClass:"block-layers"},[n("div",{staticClass:"block-layers__header"},[t._v(" "+t._s(e.name)+" ")]),n("div",{staticClass:"block-layers__body"},[t._l(e.fields,(function(e,a){return[n("t-auto-field-trainings",t._b({key:"checkpoint_"+a+e.parse,attrs:{state:t.state,inline:!0},on:{parse:t.parse}},"t-auto-field-trainings",e,!1))]}))],2)])]}))],2)])})),1)],1)])]),n("div",{staticClass:"params__footer"},[t.stopLearning?n("div",{staticClass:"params__overlay"},[n("LoadSpiner",{attrs:{text:"Остановка..."}})],1):t._e(),t._l(t.button,(function(e,a){var s=e.title,i=e.visible;return n("div",{key:a,staticClass:"params__btn"},[n("t-button",{attrs:{disabled:!i},on:{click:function(e){return t.btnEvent(a)}}},[t._v(t._s(s))])],1)}))],2),n("SaveTrainings",{model:{value:t.dialogSave,callback:function(e){t.dialogSave=e},expression:"dialogSave"}})],1)},Vt=[],Wt=n("eb4c"),Ht=(n("4d63"),n("c607"),n("2c3e"),n("466d"),/(\[[^\[\]]*\])/g);function Xt(t){var e=[],n=/^([^\[\]]*)/,a=new RegExp(Ht),s=n.exec(t);s[1]&&e.push(s[1]);while(null!==(s=a.exec(t)))e.push(s[1]);return e}function Jt(t,e,n){if(0===e.length)return t=n,t;var a=e.shift(),s=a.match(/^\[(.+?)\]$/);if("[]"===a)return t=t||[],Array.isArray(t)?t.push(Jt(null,e,n)):(t._values=t._values||[],t._values.push(Jt(null,e,n))),t;if(s){var i=s[1],r=+i;isNaN(r)?(t=t||{},t[i]=Jt(t[i],e,n)):(t=t||[],t[r]=Jt(t[r],e,n))}else t[a]=Jt(t[a],e,n);return t}function Ft(t,e,n){var a=e.match(Ht);if(a){var s=Xt(e);Jt(t,s,n)}else{var i=t[e];i?(Array.isArray(i)||(t[e]=[i]),t[e].push(n)):t[e]=n}return t}var Kt=Ft,qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("at-modal",{attrs:{width:"400",maskClosable:!1,showClose:!1},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("Сохранить обучение")])]),n("div",{staticClass:"inner form-inline-label"},[n("div",{staticClass:"field-form"},[n("label",[t._v("Название")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",disabled:t.loading},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}})]),n("div",{staticClass:"field-form field-inline field-reverse"},[n("label",{on:{click:function(e){t.overwrite=!t.overwrite}}},[t._v("Перезаписать")]),n("div",{staticClass:"checkout-switch"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.overwrite,expression:"overwrite"}],attrs:{type:"checkbox",disabled:t.loading},domProps:{checked:Array.isArray(t.overwrite)?t._i(t.overwrite,null)>-1:t.overwrite},on:{change:function(e){var n=t.overwrite,a=e.target,s=!!a.checked;if(Array.isArray(n)){var i=null,r=t._i(n,i);a.checked?r<0&&(t.overwrite=n.concat([i])):r>-1&&(t.overwrite=n.slice(0,r).concat(n.slice(r+1)))}else t.overwrite=s}}}),n("span",{staticClass:"switcher"})])])]),n("template",{slot:"footer"},[n("t-button",{attrs:{disabled:""===t.name,loading:t.loading},on:{click:function(e){return t.save({name:t.name,overwrite:t.overwrite})}}},[t._v("Сохранить")]),n("t-button",{attrs:{cancel:"",disabled:t.loading},on:{click:function(e){t.dialog=!1}}},[t._v("Отменить")])],1)],2)},Qt=[],Zt={name:"modal-save-project",props:{value:Boolean},data:function(){return{name:"",overwrite:!0,loading:!1,disabled:!1}},computed:{dialog:{set:function(t){this.$emit("input",t)},get:function(){return this.value}}},methods:{save:function(t){var e=this;return Object(F["a"])(regeneratorRuntime.mark((function n(){var a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,e.loading=!0,n.next=4,e.$store.dispatch("trainings/save",t);case 4:if(a=n.sent,!a||a.error){n.next=13;break}return e.$emit("message",{message:"Проект «".concat(t.name,"» сохранен")}),n.next=9,e.$store.dispatch("projects/get",{});case 9:e.dialog=!1,e.overwrite=!1,n.next=14;break;case 13:e.$emit("message",{error:a.error.general});case 14:e.loading=!1,n.next=21;break;case 17:n.prev=17,n.t0=n["catch"](0),console.log(n.t0),e.loading=!1;case 21:case"end":return n.stop()}}),n,null,[[0,17]])})))()}},watch:{dialog:function(t){if(t){var e=this.$store.getters["projects/getProject"].training.name;this.name="__current"===e?"":e}}}},te=Zt,ee=Object(d["a"])(te,qt,Qt,!1,null,null,null),ne=ee.exports,ae={name:"params-traning",components:{LoadSpiner:g["default"],SaveTrainings:ne},data:function(){return{collapse:["main","fit","outputs","checkpoint","yolo"],optimizerValue:"",metricData:"",debounce:null,stopLearning:!1,dialogSave:!1,trainSettings:{},key:"1212",doNotSave:["architecture[parameters][checkpoint][metric_name]"]}},computed:Object(o["a"])(Object(o["a"])({},Object(c["b"])({params:"trainings/getParams",button:"trainings/getButtons",status:"trainings/getStatus"})),{},{isLearning:function(){return["addtrain","training"].includes(this.status)},statusTrain:function(){return this.$store.getters["trainings/getStatusTrain"]},state:{set:function(t){this.$store.dispatch("trainings/setStateParams",t)},get:function(){return this.$store.getters["trainings/getStateParams"]}}}),methods:{onchange:function(t){console.log(t)},btnEvent:function(t){"train"===t&&this.start(),"stop"===t&&this.stop(),"clear"===t&&this.clear(),"save"===t&&this.save()},start:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(t.trainSettings),e.next=3,t.$store.dispatch("trainings/start",t.trainSettings);case 3:n=e.sent,n&&(a=n.data,a&&null!==a&&void 0!==a&&null!==(s=a.state)&&void 0!==s&&s.status&&t.debounce(!0));case 5:case"end":return e.stop()}}),e)})))()},stop:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.stopLearning=!0,e.next=3,t.$store.dispatch("trainings/stop",{});case 3:a=e.sent,a&&null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.progress&&(s=a.data.progress.finished,s&&(t.debounce(!1),t.stopLearning=!1));case 5:case"end":return e.stop()}}),e)})))()},clear:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("trainings/clear",{});case 2:case"end":return e.stop()}}),e)})))()},save:function(){this.dialogSave=!0},progress:function(){var t=this;return Object(F["a"])(regeneratorRuntime.mark((function e(){var n,a,s,i,r,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("trainings/progress",{});case 2:a=e.sent,a&&null!==a&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.progress&&(s=a.data.progress,i=s.finished,r=s.message,o=s.percent,t.$store.dispatch("messages/setProgressMessage",r),t.$store.dispatch("messages/setProgress",o),t.stopLearning=!t.isLearning,i?(t.$store.dispatch("projects/get"),t.stopLearning=!1):t.debounce(!0)),null!==a&&void 0!==a&&a.error&&(t.stopLearning=!1);case 5:case"end":return e.stop()}}),e)})))()},parse:function(t){var e=t.parse,n=t.value,a=t.changeable,s=t.mounted;Kt(this.trainSettings,e,n),this.trainSettings=Object(o["a"])({},this.trainSettings),!s&&a?(this.$store.dispatch("trainings/update",this.trainSettings),this.state=Object(_t["a"])({},"architecture[parameters][checkpoint][metric_name]",null)):n&&(this.state=Object(_t["a"])({},"".concat(e),n))}},created:function(){var t=this;this.debounce=Object(Wt["a"])((function(e){e&&t.progress()}),1e3),this.debounce(this.isLearning)},beforeDestroy:function(){this.debounce(!1)},watch:{params:function(){this.key="dsdsdsd"}}},se=ae,ie=(n("f3cf"),Object(d["a"])(se,Yt,Vt,!1,null,"2f4ebb64",null)),re=ie.exports,oe={name:"Training",components:{Toolbar:p,Graphics:It,Params:re},data:function(){return{collabse:[]}},methods:{},created:function(){}},ce=oe,le=(n("0ae7"),Object(d["a"])(ce,a,s,!1,null,"dcc032b4",null));e["default"]=le.exports},c109:function(t,e,n){"use strict";n("fe9f")},c50c:function(t,e,n){"use strict";n("45ac")},dea1:function(t,e,n){"use strict";n("4871")},e59a:function(t,e,n){"use strict";n("0e99")},e635:function(t,e,n){},eb4c:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=function(t,e,n){var a;return function(){var s=this,i=arguments,r=function(){a=null,n||t.apply(s,i)},o=n&&!a;clearTimeout(a),a=setTimeout(r,e),o&&t.apply(s,i)}}},eca8:function(t,e,n){},f3cf:function(t,e,n){"use strict";n("234b")},f4d9:function(t,e,n){},fe9f:function(t,e,n){}}]);