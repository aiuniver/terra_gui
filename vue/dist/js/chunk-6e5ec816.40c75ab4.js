(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e5ec816"],{c66d:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"page-profile"},[s("p",{staticClass:"page-profile__title"},[e._v("Мой профиль")]),s("div",{staticClass:"page-profile__block"},[s("t-input-new",{attrs:{label:"Имя",error:e.errFirst},on:{input:function(t){e.errFirst=""}},model:{value:e.firstName,callback:function(t){e.firstName="string"===typeof t?t.trim():t},expression:"firstName"}}),s("t-input-new",{attrs:{label:"Фамилия",error:e.errLast},on:{input:function(t){e.errLast=""}},model:{value:e.lastName,callback:function(t){e.lastName="string"===typeof t?t.trim():t},expression:"lastName"}})],1),s("div",{staticClass:"page-profile__btns"},[s("t-button",{staticClass:"btn",attrs:{loading:e.isLoading,disabled:e.isLoading},on:{click:e.save}},[e._v("Сохранить")])],1),s("hr"),s("div",{staticClass:"page-profile__block"},[s("div",{staticClass:"page-profile__block--contact"},[s("p",{staticClass:"page-profile__label"},[e._v("Логин")]),s("p",{staticClass:"page-profile__text"},[e._v(e._s(e.user.login))])]),s("div",{staticClass:"page-profile__block--contact"},[s("p",{staticClass:"page-profile__label"},[e._v("E-mail")]),s("p",{staticClass:"page-profile__text"},[e._v(e._s(e.user.email))])])]),s("hr"),s("div",{staticClass:"page-profile__token"},[s("p",{staticClass:"page-profile__label"},[e._v("Token")]),s("p",{staticClass:"page-profile__text"},[s("span",{ref:"token"},[e._v(e._s(e.user.token))]),s("i",{staticClass:"btn-copy",on:{click:e.copy}}),s("span",{staticClass:"copy-msg"})]),s("div",{staticClass:"btn-text",on:{click:e.updateToken}},[e._v("Обновить токен")])]),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.showNotice,expression:"showNotice"}],staticClass:"page-profile__notice"},[s("i",{staticClass:"notice__icon"}),s("p",[e._v(e._s(e.noticeMsg))])])])],1)},i=[],n=s("1da1"),r=s("5530"),o=(s("96cf"),s("2f62")),c={name:"Profile",data:function(){return{isChanged:!1,showNotice:!1,noticeMsg:"",errFirst:"",errLast:"",isLoading:!1}},computed:Object(r["a"])(Object(r["a"])({},Object(o["b"])({user:"projects/getUser"})),{},{firstName:{set:function(e){this.$store.commit("projects/SET_USER",{first_name:e})},get:function(){return this.user.first_name}},lastName:{set:function(e){this.$store.commit("projects/SET_USER",{last_name:e})},get:function(){return this.user.last_name}}}),methods:{copy:function(){var e=window.getSelection(),t=document.createRange();t.selectNodeContents(this.$refs.token),e.removeAllRanges(),e.addRange(t),document.execCommand("copy"),e.removeAllRanges(),document.querySelector(".copy-msg").textContent="Token скопирован в буфер обмена"},updateToken:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("axios",{url:"/profile/update_token/"});case 2:s=t.sent,s.success&&(e.$refs.token.textContent=s.data.new_token,e.$store.dispatch("messages/setMessage",{message:"Ваш token успешно обновлен"}));case 4:case"end":return t.stop()}}),t)})))()},save:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.firstName||(e.errFirst="Поле обязательно для заполнения"),e.lastName||(e.errLast="Поле обязательно для заполнения"),!e.firstName||!e.lastName){t.next=9;break}return e.isLoading=!0,t.next=6,e.$store.dispatch("profile/save",{first_name:e.firstName,last_name:e.lastName});case 6:s=t.sent,e.isLoading=!1,s.success&&e.$store.dispatch("messages/setMessage",{message:"Ваши данные успешно изменены"});case 9:case"end":return t.stop()}}),t)})))()}},watch:{firstName:function(){this.isChanged=!0},lastName:function(){this.isChanged=!0}}},l=c,p=(s("f85b"),s("2877")),u=Object(p["a"])(l,a,i,!1,null,"6f24bc89",null);t["default"]=u.exports},f443:function(e,t,s){},f85b:function(e,t,s){"use strict";s("f443")}}]);