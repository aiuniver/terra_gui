(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3cbea70f"],{"0fbb":function(t,e,s){},b1bb:function(t,e,s){"use strict";s("0fbb")},c66d:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("main",{staticClass:"page-profile"},[s("p",{staticClass:"page-profile__title"},[t._v("Мой профиль")]),s("div",{staticClass:"page-profile__block"},[s("t-input",{attrs:{label:"Имя",error:t.errFirst},model:{value:t.firstName,callback:function(e){t.firstName=e},expression:"firstName"}}),s("t-input",{attrs:{label:"Фамилия",error:t.errLast},model:{value:t.lastName,callback:function(e){t.lastName=e},expression:"lastName"}})],1),s("div",{staticClass:"page-profile__btns"},[s("button",{staticClass:"btn",on:{click:t.save}},[t._v("Сохранить")])]),s("hr"),s("div",{staticClass:"page-profile__block"},[s("div",{staticClass:"page-profile__block--contact"},[s("p",{staticClass:"page-profile__label"},[t._v("Логин")]),s("p",{staticClass:"page-profile__text"},[t._v(t._s(t.user.login))])]),t._m(0)]),s("hr"),s("div",{staticClass:"page-profile__token"},[s("p",{staticClass:"page-profile__label"},[t._v("Token")]),s("p",{ref:"token",staticClass:"page-profile__text"},[t._v(" a3b3a0f552d65df1eb3fc08b0f8a28854895814b434b2e7fbcadc60d6e1a76a4 "),s("i",{staticClass:"btn-copy",on:{click:t.copy}})]),s("div",{staticClass:"btn-text",on:{click:t.updateToken}},[t._v("Обновить токен")])]),s("hr"),t._m(1),s("transition",{attrs:{name:"slide-fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.showNotice,expression:"showNotice"}],staticClass:"page-profile__notice"},[s("i",{staticClass:"notice__icon"}),s("p",[t._v(t._s(t.noticeMsg))])])])],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-profile__block--contact"},[s("p",{staticClass:"page-profile__label"},[t._v("E-mail")]),s("p",{staticClass:"page-profile__text"},[t._v("...")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"page-profile__subscription"},[s("p",{staticClass:"page-profile__label"},[t._v("Подписка действительна до 06.10.2021")]),s("div",{staticClass:"btn-text"},[t._v("Продлить")])])}],n=s("1da1"),c=s("5530"),r=(s("96cf"),s("2f62")),o={name:"Profile",data:function(){return{isChanged:!1,showNotice:!1,noticeMsg:"",tId:null,errFirst:"",errLast:"",cached:null,watcher:null}},computed:Object(c["a"])(Object(c["a"])({},Object(r["b"])({user:"projects/getUser"})),{},{firstName:{set:function(t){this.$store.commit("projects/SET_USER",{first_name:t})},get:function(){return this.user.first_name}},lastName:{set:function(t){this.$store.commit("projects/SET_USER",{last_name:t})},get:function(){return this.user.last_name}}}),methods:{copy:function(){var t=window.getSelection(),e=document.createRange();e.selectNodeContents(this.$refs.token),t.removeAllRanges(),t.addRange(e),document.execCommand("copy"),t.removeAllRanges(),this.notify("Token скопирован в буфер обмена")},updateToken:function(){this.notify("Ваш token успешно обновлен")},save:function(){this.firstName||(this.errFirst="Поле обязательно для заполнения"),this.lastName||(this.errLast="Поле обязательно для заполнения"),this.firstName&&this.lastName&&(this.$store.dispatch("profile/save",{fname:this.firstName,lname:this.lastName}),this.notify("Ваши данные успешно изменены"))},cancel:function(){var t=this;this.errFirst=this.errLast="",this.firstName=this.cached[0],this.lastName=this.cached[1],setTimeout((function(){t.isChanged=!1}),1)},notify:function(t){var e=this;clearTimeout(this.tId),this.showNotice=!1,this.noticeMsg=t,this.showNotice=!0,this.tId=setTimeout((function(){return e.showNotice=!1}),2e3)}},watch:{firstName:function(){this.isChanged=!0},lastName:function(){this.isChanged=!0}},mounted:function(){var t=this;this.watcher=this.$store.watch((function(){return t.$store.getters["projects/getUser"]}),Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s=Object(c["a"])({},t.user),t.cached=[s.first_name,s.last_name],t.watcher(),t.isChanged=!1;case 4:case"end":return e.stop()}}),e)}))))}},l=o,f=(s("b1bb"),s("2877")),p=Object(f["a"])(l,a,i,!1,null,"4f443164",null);e["default"]=p.exports}}]);