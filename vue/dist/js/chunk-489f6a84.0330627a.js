(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-489f6a84"],{"0dcf":function(t,e,n){"use strict";n("51f4")},"0e4b":function(t,e,n){},"129f":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"12a0":function(t,e,n){"use strict";n("865d")},"12da":function(t,e,n){"use strict";n("edae")},1864:function(t,e,n){},"1a8a":function(t,e,n){},2332:function(t,e,n){},"48f5":function(t,e,n){"use strict";n("1864")},"4d8f":function(t,e,n){"use strict";n("1a8a")},"51f4":function(t,e,n){},5544:function(t,e,n){"use strict";n("ca8b")},"5ec1":function(t,e,n){"use strict";n("2332")},"60ce":function(t,e,n){"use strict";n("7515")},6522:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown"},[n("label",[t._v(t._s(t.label))]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"dropdown__input",attrs:{name:t.name,disabled:t.disabled,placeholder:t.placeholder},domProps:{value:t.search},on:{focus:t.focus,blur:function(e){return t.select(!1)},input:function(e){e.target.composing||(t.search=e.target.value)}}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dropdown__content"},[t._l(t.filterList,(function(e,i){return n("div",{key:i,on:{mousedown:function(n){return t.select(e)}}},[t._v(" "+t._s(e.label)+" ")])})),t.filterList.length?t._e():n("div",[t._v("Нет слоя")])],2)])},s=[],a=(n("ac1f"),n("841c"),n("4de4"),n("caad"),n("2532"),{name:"Autocomplete",props:{name:String,list:{type:Array,required:!0,default:function(){return[]}},placeholder:String,disabled:Boolean,label:String,value:String},data:function(){return{selected:{},show:!1,search:""}},created:function(){this.search=this.value},computed:{filterList:function(){var t=this;return this.list?this.list.filter((function(e){var n=t.search;return!n||e.label.toLowerCase().includes(n.toLowerCase())})):[]}},methods:{select:function(t){t?(this.selected=t,this.show=!1,this.search=t.label,this.$emit("input",this.selected.value),this.$emit("selected",t)):(this.search=this.selected.label,this.show=!1)},focus:function(){this.show=!0,this.$emit("focus",!0)}},watch:{value:{handler:function(t){this.show=!1,this.search=t}}}}),o=a,l=(n("f011"),n("2877")),c=Object(l["a"])(o,i,s,!1,null,null,null);e["a"]=c.exports},"6b23":function(t,e,n){},7515:function(t,e,n){},"7b8d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"field"},[n("label",{staticClass:"field__label"},[t._v(t._s(t.label))]),n("input",{staticStyle:{display:"none"},attrs:{name:t.parse},domProps:{value:t.select}}),n("at-select",{staticStyle:{width:"100px"},attrs:{clearable:"",size:"small"},on:{"on-change":t.change},model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},t._l(t.items,(function(e,i){var s=e.label,a=e.value;return n("at-option",{key:"item_"+i,attrs:{value:a}},[t._v(" "+t._s(s)+" ")])})),1)],1)},s=[],a=(n("a9e3"),n("d81d"),n("b64b"),n("b0c0"),{name:"Select",props:{label:{type:String,default:"Label"},type:{type:String,default:""},value:{type:[String,Number]},name:{type:String},parse:{type:String},lists:{type:[Array,Object]}},data:function(){return{select:""}},computed:{items:function(){return Array.isArray(this.lists)?this.lists.map((function(t){return t||""})):Object.keys(this.lists)}},methods:{change:function(t){this.$emit("input",t),this.$emit("change",{name:this.name,value:t})}},created:function(){this.select=this.value},destroyed:function(){}}),o=a,l=(n("5ec1"),n("2877")),c=Object(l["a"])(o,i,s,!1,null,null,null);e["a"]=c.exports},"7d6e":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["t-field",{"t-inline":t.inline}]},[n("label",{staticClass:"t-field__label",attrs:{for:t.parse}},[t._v(t._s(t.label))]),"checkbox"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"t-field__input",attrs:{id:t.parse,name:t.parse,type:"checkbox"},domProps:{value:t.value,checked:Array.isArray(t.input)?t._i(t.input,t.value)>-1:t.input},on:{blur:t.change,change:function(e){var n=t.input,i=e.target,s=!!i.checked;if(Array.isArray(n)){var a=t.value,o=t._i(n,a);i.checked?o<0&&(t.input=n.concat([a])):o>-1&&(t.input=n.slice(0,o).concat(n.slice(o+1)))}else t.input=s}}}):"radio"===t.type?n("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"t-field__input",attrs:{id:t.parse,name:t.parse,type:"radio"},domProps:{value:t.value,checked:t._q(t.input,t.value)},on:{blur:t.change,change:function(e){t.input=t.value}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.input,expression:"input"}],staticClass:"t-field__input",attrs:{id:t.parse,name:t.parse,type:t.type},domProps:{value:t.value,value:t.input},on:{blur:t.change,input:function(e){e.target.composing||(t.input=e.target.value)}}})])},s=[],a=(n("a9e3"),n("b0c0"),{props:{label:{type:String,default:"Label"},type:{type:String,default:"text"},value:{type:[String,Number]},parse:String,name:String,inline:Boolean},data:function(){return{isChange:!1}},computed:{input:{set:function(t){this.$emit("input",t),this.isChange=!0},get:function(){return this.value}}},methods:{change:function(t){if(this.isChange){var e=t.target.value;e="number"===this.type?+e:e,this.$emit("change",{name:this.name,value:e}),this.isChange=!1}}}}),o=a,l=(n("b037"),n("2877")),c=Object(l["a"])(o,i,s,!1,null,"161d2283",null);e["a"]=c.exports},"841c":function(t,e,n){"use strict";var i=n("d784"),s=n("825a"),a=n("1d80"),o=n("129f"),l=n("14c3");i("search",(function(t,e,n){return[function(e){var n=a(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,this,t);if(i.done)return i.value;var a=s(this),c=String(t),r=a.lastIndex;o(r,0)||(a.lastIndex=0);var u=l(a,c);return o(a.lastIndex,r)||(a.lastIndex=r),null===u?-1:u.index}]}))},"865d":function(t,e,n){},9136:function(t,e,n){"use strict";n("6b23")},b037:function(t,e,n){"use strict";n("c373")},b95f:function(t,e,n){"use strict";n("0e4b")},c373:function(t,e,n){},ca8b:function(t,e,n){},d14a:function(t,e,n){},e4f6:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"page-modeling"},[n("div",{staticClass:"cont"},[n("ModalLoadModel"),n("Toolbar"),n("ModCanvas2"),n("Params")],1)])},s=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"toolbar"},[n("ul",{staticClass:"toolbar__menu"},[t._l(t.lists,(function(e,i){var s=e.title,a=e.name,o=e.disabled,l=e.icon,c=e.hr;return[n("li",{key:i,attrs:{disabled:o},on:{click:function(e){return e.preventDefault(),t.click(a)}}},[n("span",{class:l,attrs:{title:s}})]),c?n("hr",{key:"hr_"+i}):t._e()]}))],2)])},o=[],l={name:"Toolbar",data:function(){return{lists:[{title:"Загрузить модель",name:"load",disabled:!1,icon:"icon-model-load"},{title:"Сохранить модель",name:"save",disabled:!0,icon:"icon-model-save"},{title:"Валидация",name:"validation",disabled:!1,icon:"icon-model-validation"},{title:"Очистить",name:"clear",disabled:!1,icon:"icon-clear-model",hr:!0},{title:"Входящий слой",name:"input",disabled:!0,icon:"icon-layer-input"},{title:"Промежуточный слой",name:"middle",disabled:!1,icon:"icon-layer-middle"},{title:"Исходящий слой",name:"output",disabled:!0,icon:"icon-layer-output",hr:!0},{title:"Код на Keras",name:"keras",disabled:!0,icon:"icon-keras-code"}]}},methods:{click:function(t){this.$store.dispatch("modeling/setToolbarEvent",{event:t})}}},c=l,r=(n("0dcf"),n("2877")),u=Object(r["a"])(c,a,o,!1,null,"349c075e",null),d=u.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"board"},[n("div",{staticClass:"canvas"},[n("VueBlocksContainer",{ref:"container",staticClass:"cont",on:{blockSelect:t.selected,blockDeselect:function(e){return t.selected(null)}}})],1)])},m=[],p=n("5530"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-container"},[n("VueLink",{attrs:{lines:t.lines}}),t._l(t.blocks,(function(e){return n("VueBlock",t._b({key:e.id,attrs:{options:t.optionsForChild},on:{linkingStart:function(n){return t.linkingStart(e,n)},linkingStop:function(n){return t.linkingStop(e,n)},linkingBreak:function(n){return t.linkingBreak(e,n)},select:function(n){return t.blockSelect(e)},delete:function(n){return t.blockDelete(e)}}},"VueBlock",e,!1,!0))})),n("div",{staticClass:"btn-zoom"},[n("i",{staticClass:"icon icon-plus",on:{click:function(e){return t.zoom(1)}}}),n("i",{staticClass:"icon icon-minimize",on:{click:function(e){return t.zoom(0)}}}),n("i",{staticClass:"icon icon-minus",on:{click:function(e){return t.zoom(-1)}}})])],2)},v=[],g=n("2909"),k=n("b85c");n("7db0"),n("4de4"),n("99af"),n("d81d"),n("159b");function b(t){var e=t.getBoundingClientRect(),n=window.pageYOffset,i=window.pageXOffset,s=e.top+n,a=e.left+i;return{top:Math.round(s),left:Math.round(a)}}function y(t,e){var n=e.pageX||e.clientX+document.documentElement.scrollLeft,i=e.pageY||e.clientY+document.documentElement.scrollTop,s=b(t),a=n-s.left,o=i-s.top;return{x:a,y:o}}var _={getMousePosition:y},x=n("9643"),C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vue-block",style:t.style,on:{mouseover:function(e){t.hover=!0},mouseleave:function(e){t.hover=!1}}},[n("div",{class:["header",t.group,{selected:t.selected}]},[n("div",{staticClass:"title",attrs:{title:t.name}},[t._v(t._s(t.id)+": "+t._s(t.name))]),n("div",{staticClass:"parametr",attrs:{title:t.parameters}},[t._v("[dsd]sdsds")])]),-1===t.group.indexOf("middle")?n("div",{directives:[{name:"show",rawName:"v-show",value:t.hover||t.selected,expression:"hover || selected"}],staticClass:"hover-over"},[n("i",{staticClass:"icon icon-link"}),n("i",{staticClass:"icon icon-link-2"})]):n("div",{directives:[{name:"show",rawName:"v-show",value:t.hover||t.selected,expression:"hover || selected"}],staticClass:"hover-sloy"},[n("i",{staticClass:"icon icon-link"}),n("i",{staticClass:"icon icon-link-2"}),n("i",{staticClass:"icon icon-trash-2",on:{click:t.deleteBlock}})]),n("div",{staticClass:"inputs"},t._l(t.inputs,(function(e,i){return n("div",{key:"input"+i,staticClass:"input inputSlot",class:{active:e.active},on:{mouseup:function(e){return t.slotMouseUp(e,i)},mousedown:function(e){return t.slotBreak(e,i)}}})})),0),n("div",{staticClass:"outputs"},t._l(t.outputs,(function(e,i){return n("div",{key:"output"+i,staticClass:"output",class:[{active:e.active},t.type[i]],on:{mousedown:function(e){return t.slotMouseDown(e,i)}}})})),0)])},S=[],w=(n("a9e3"),{name:"VueBlock",props:{id:{type:Number},name:{type:String},group:{type:String},position:{type:Array,default:function(){return[]},validator:function(t){return"number"===typeof t[0]&&"number"===typeof t[1]}},selected:Boolean,title:{type:String,default:"Title"},inputs:Array,outputs:Array,parameters:{type:Object,default:function(){}},options:{type:Object}},data:function(){return{hover:!1,hasDragged:!1,type:["bottom","right","left"]}},created:function(){this.mouseX=0,this.mouseY=0,this.lastMouseX=0,this.lastMouseY=0,this.linking=!1,this.dragging=!1},mounted:function(){document.documentElement.addEventListener("mousemove",this.handleMove,!0),document.documentElement.addEventListener("mousedown",this.handleDown,!0),document.documentElement.addEventListener("mouseup",this.handleUp,!0)},beforeDestroy:function(){document.documentElement.removeEventListener("mousemove",this.handleMove,!0),document.documentElement.removeEventListener("mousedown",this.handleDown,!0),document.documentElement.removeEventListener("mouseup",this.handleUp,!0)},methods:{handleMove:function(t){if(this.mouseX=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=t.pageY||t.clientY+document.documentElement.scrollTop,this.dragging&&!this.linking){var e=this.mouseX-this.lastMouseX,n=this.mouseY-this.lastMouseY;this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.moveWithDiff(e,n),this.hasDragged=!0}},handleDown:function(t){this.mouseX=t.pageX||t.clientX+document.documentElement.scrollLeft,this.mouseY=t.pageY||t.clientY+document.documentElement.scrollTop,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY;var e=t.target||t.srcElement;this.$el.contains(e)&&1===t.which&&(this.dragging=!0,this.$emit("select"),t.preventDefault&&t.preventDefault())},handleUp:function(){this.dragging&&(this.dragging=!1,this.hasDragged&&(this.save(),this.hasDragged=!1)),this.linking&&(this.linking=!1)},slotMouseDown:function(t,e){this.linking=!0,this.$emit("linkingStart",e),t.preventDefault&&t.preventDefault()},slotMouseUp:function(t,e){this.$emit("linkingStop",e),t.preventDefault&&t.preventDefault()},slotBreak:function(t,e){this.linking=!0,this.$emit("linkingBreak",e),t.preventDefault&&t.preventDefault()},save:function(){this.$emit("update")},deleteBlock:function(){this.$emit("delete")},moveWithDiff:function(t,e){var n=this.position[0]+t/this.options.scale,i=this.position[1]+e/this.options.scale;this.$emit("update:position",[n,i])}},computed:{style:function(){return{left:this.options.center.x+this.position[0]*this.options.scale+"px",top:this.options.center.y+this.position[1]*this.options.scale+"px",width:this.options.width+"px",transform:"scale("+this.options.scale+")",transformOrigin:"top left"}}}}),D=w,E=(n("9136"),Object(r["a"])(D,C,S,!1,null,"3064c2df",null)),$=E.exports,M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:"100%",height:"100%"}},[t._l(t.renderedPathes,(function(e,i){return n("g",{key:"k"+i},[t.outline?n("path",{style:e.outlineStyle,attrs:{d:e.data}}):t._e(),n("path",{style:e.style,attrs:{d:e.data}})])})),n("g",t._l(t.renderedArrows,(function(t,e){return n("path",{key:"a"+e,style:t.style,attrs:{d:"M -1 -1 L 0 1 L 1 -1 z",transform:t.transform}})})),0)],2)},L=[],O={props:{lines:{type:Array,default:function(){return[]}},outline:{type:Boolean,default:!1}},methods:{distance:function(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))},computeConnectionPoint:function(t,e,n,i,s){var a=this.distance(t,e,n,i),o={x:t,y:e},l={x:t+.25*a,y:e},c={x:n-.25*a,y:i},r={x:n,y:i},u=(1-s)*(1-s)*(1-s),d=(1-s)*(1-s)*3*s,h=3*(1-s)*(s*s),m=s*s*s,p=u*o.x+d*l.x+h*c.x+m*r.x,f=u*o.y+d*l.y+h*c.y+m*r.y;return{x:p,y:f}}},computed:{renderedPathes:function(){var t=this;if(!this.lines)return[];var e=[];return this.lines.forEach((function(n){var i=.2*t.distance(n.x1,n.y1,n.x2,n.y2),s=["M ".concat(n.x1,", ").concat(n.y1," C ").concat(n.x1,", ").concat(n.y1,", ").concat(n.x2,", ").concat(n.y2,", ").concat(n.x2,", ").concat(n.y2),"M ".concat(n.x1,", ").concat(n.y1," C ").concat(n.x1+i,", ").concat(n.y1,", ").concat(n.x2-i,", ").concat(n.y2,", ").concat(n.x2,", ").concat(n.y2),"M ".concat(n.x1,", ").concat(n.y1," C ").concat(n.x1-i,", ").concat(n.y1,", ").concat(n.x2+i,", ").concat(n.y2,", ").concat(n.x2,", ").concat(n.y2)];e.push({data:s[n.slot]||s[0],style:n.style,outlineStyle:n.outlineStyle})})),e},renderedArrows:function(){var t=this;if(!this.lines)return[];var e=[];return this.lines.forEach((function(n){var i=t.computeConnectionPoint(n.x1,n.y1,n.x2,n.y2,.5),s=t.computeConnectionPoint(n.x1,n.y1,n.x2,n.y2,.501),a=-Math.atan2(s.x-i.x,s.y-i.y),o=180*(a>=0?a:2*Math.PI+a)/Math.PI;e.push({transform:"translate(".concat(i.x,", ").concat(i.y,") rotate(").concat(o-15,")"),style:{stroke:"rgb(80, 125, 150)",strokeWidth:2*n.style.strokeWidth,fill:n.style.stroke}})})),e}}},j=O,Y=Object(r["a"])(j,M,L,!1,null,"c7f29b90",null),B=Y.exports,X={name:"VueBlockContainer",components:{VueBlock:$,VueLink:B},props:{blocksContent:{type:Array,default:function(){return[]}},scene:{type:Object,default:function(){return{blocks:[],links:[],container:{}}}},options:{type:Object}},data:function(){return{dragging:!1,centerX:0,centerY:0,scale:1,links:[],tempLink:null,selectedBlock:null,hasDragged:!1,mouseX:0,mouseY:0,lastMouseX:0,lastMouseY:0,minScale:.2,maxScale:5,linking:!1,linkStartData:null,inputSlotClassName:"inputSlot",defaultScene:{blocks:[],links:[],container:{}}}},computed:{blocks:{set:function(t){this.$store.dispatch("modeling/setBlocks",t)},get:function(){return this.$store.getters["modeling/getBlocks"]}},optionsForChild:function(){return{width:200,titleHeight:48,scale:this.scale,inputSlotClassName:this.inputSlotClassName,center:{x:this.centerX,y:this.centerY}}},container:function(){return{centerX:this.centerX,centerY:this.centerY,scale:this.scale}},lines:function(){var t,e=this,n=[],i=Object(k["a"])(this.links);try{var s=function(){var i=t.value,s=e.blocks.find((function(t){return t.id===i.originID})),a=e.blocks.find((function(t){return t.id===i.targetID}));if(!s||!a)return console.log("Remove invalid link",i),e.removeLink(i.id),"continue";if(s.id===a.id)return console.log("Loop detected, remove link",i),e.removeLink(i.id),"continue";var o=e.getConnectionPos(s,i.originSlot,!1),l=e.getConnectionPos(a,i.targetSlot,!0);if(!o||!l)return console.log("Remove invalid link (slot not exist)",i),e.removeLink(i.id),"continue";var c=o.x,r=o.y,u=l.x,d=l.y;n.push({x1:c,y1:r,x2:u,y2:d,slot:i.originSlot,style:{stroke:"rgb(101, 185, 244)",strokeWidth:3*e.scale,fill:"none"},outlineStyle:{stroke:"#666",strokeWidth:6*e.scale,strokeOpacity:.6,fill:"none"}})};for(i.s();!(t=i.n()).done;)s()}catch(a){i.e(a)}finally{i.f()}return this.tempLink&&(this.tempLink.style={stroke:"#8f8f8f",strokeWidth:3*this.scale,fill:"none"},n.push(this.tempLink)),n}},methods:{handleMauseOver:function(t){this.mouseIsOver="mouseenter"===t.type},keyup:function(t){var e=t.code,n=t.ctrlKey,i=this.mouseIsOver;console.log(i,e),i&&"Delete"===e&&this.selectedBlock&&this.blockDelete(this.selectedBlock),i&&"KeyC"===e&&n&&this.selectedBlock&&this.blockDelete(this.selectedBlock)},zoom:function(t){if(0!==t){var e=1===t?1.1:.9090909090909091;if(this.scale*=e,this.scale<this.minScale)this.scale=this.minScale;else if(this.scale>this.maxScale)this.scale=this.maxScale;else{var n={x:this.mouseX,y:this.mouseY},i=(n.x-this.centerX)*(e-1),s=(n.y-this.centerY)*(e-1);this.centerX-=i,this.centerY-=s}}else this.scale=1},handleMove:function(t){var e=_.getMousePosition(this.$el,t);if(this.mouseX=e.x,this.mouseY=e.y,this.dragging){var n=this.mouseX-this.lastMouseX,i=this.mouseY-this.lastMouseY;this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.centerX+=n,this.centerY+=i,this.hasDragged=!0}if(this.linking&&this.linkStartData){var s=this.getConnectionPos(this.linkStartData.block,this.linkStartData.slotNumber,!1);this.tempLink={x1:s.x,y1:s.y,x2:this.mouseX,y2:this.mouseY,slot:this.linkStartData.slotNumber}}},handleDown:function(t){var e=t.target||t.srcElement;if((e===this.$el||e.matches("svg, svg *"))&&1===t.which){this.dragging=!0;var n=_.getMousePosition(this.$el,t);this.mouseX=n.x,this.mouseY=n.y,this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,this.deselectAll(),t.preventDefault&&t.preventDefault()}},handleUp:function(t){var e=t.target||t.srcElement;this.dragging&&(this.dragging=!1,this.hasDragged&&(this.hasDragged=!1)),!this.$el.contains(e)||"string"===typeof e.className&&-1!==e.className.indexOf(this.inputSlotClassName)||(this.linking=!1,this.tempLink=null,this.linkStartData=null)},handleWheel:function(t){var e=t.target||t.srcElement;if(this.$el.contains(e)){var n=Math.pow(1.1,-.01*t.deltaY);if(this.scale*=n,this.scale<this.minScale)return void(this.scale=this.minScale);if(this.scale>this.maxScale)return void(this.scale=this.maxScale);var i={x:this.mouseX,y:this.mouseY},s=(i.x-this.centerX)*(n-1),a=(i.y-this.centerY)*(n-1);this.centerX-=s,this.centerY-=a}},getConnectionPos:function(t,e,n){if(t&&-1!==e){var i=0,s=0;if(i+=t.position[0],s+=t.position[1],n&&t.inputs.length>e)1===t.inputs.length?i+=this.optionsForChild.width/2:(i+=this.optionsForChild.width/2-10*t.inputs.length/2,i+=20*e);else{if(n||!(t.outputs.length>e))return void console.error("slot "+e+" not found, is input: "+n,t);0===e&&(i+=this.optionsForChild.width/2,s+=50),1===e&&(i+=this.optionsForChild.width,s+=25),2===e&&(s+=25)}return i*=this.scale,s*=this.scale,i+=this.centerX,s+=this.centerY,{x:i,y:s}}},linkingStart:function(t,e){console.log("linkingStart"),this.linkStartData={block:t,slotNumber:e};var n=this.getConnectionPos(this.linkStartData.block,this.linkStartData.slotNumber,!1);this.tempLink={x1:n.x,y1:n.y,x2:this.mouseX,y2:this.mouseY},this.linking=!0},linkingStop:function(t,e){if(console.log("linkingStop"),this.linkStartData&&t&&e>-1){var n=this.linkStartData,i=n.slotNumber,s=n.block.id,a=t.id,o=e;this.links=this.links.filter((function(t){return!(t.targetID===a&&t.targetSlot===o&&t.originID===s&&t.originSlot===i)&&!(t.originID===s&&t.targetID===a)}));var l=Math.max.apply(Math,[0].concat(Object(g["a"])(this.links.map((function(t){return t.id})))));this.linkStartData.block.id!==t.id&&(this.links.push({id:l+1,originID:this.linkStartData.block.id,originSlot:this.linkStartData.slotNumber,targetID:t.id,targetSlot:e}),console.log(this.links),t.inputs[o].active=!0,t.inputs[o].active=!0)}this.linking=!1,this.tempLink=null,this.linkStartData=null},linkingBreak:function(t,e){if(console.log("linkingBreak"),t&&e>-1){var n=this.links.find((function(n){return n.targetID===t.id&&n.targetSlot===e}));if(n){var i=this.blocks.find((function(t){return t.id===n.originID}));this.links=this.links.filter((function(n){return!(n.targetID===t.id&&n.targetSlot===e)})),t.inputs[n.targetSlot].active=!1,i.outputs[n.originSlot].active=!1,console.log(n),this.linkingStart(i,n.originSlot)}}},removeLink:function(t){console.log("removeLink"),this.links=this.links.filter((function(e){return!(e.id===t)}))},addNewBlock:function(t,e,n){var i=Math.max.apply(Math,[0].concat(Object(g["a"])(this.blocks.map((function(t){return t.id}))))),s=Object(x["a"])(t,i+1);s?(void 0===e||void 0===n?(e=(this.$el.clientWidth/2-this.centerX)/this.scale,n=(this.$el.clientHeight/2-this.centerY)/this.scale):(e=(e-this.centerX)/this.scale,n=(n-this.centerY)/this.scale),s.position=[e,n],this.blocks.push(s),this.blocks=this.blocks):console.warn("block not create: "+s)},deselectAll:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.blocks.forEach((function(n){n.id!==e&&n.selected&&t.blockDeselect(n)}))},blockSelect:function(t){t.selected=!0,this.selectedBlock=t,this.deselectAll(t.id),this.$emit("blockSelect",t)},blockDeselect:function(t){t.selected=!1,t&&this.selectedBlock&&this.selectedBlock.id===t.id&&(this.selectedBlock=null),this.$emit("blockDeselect",t)},blockDelete:function(t){var e=this;t.selected&&this.blockDeselect(t),this.links.forEach((function(n){n.originID!==t.id&&n.targetID!==t.id||e.removeLink(n.id)})),this.blocks=this.blocks.filter((function(e){return e.id!==t.id}))},updateScene:function(){}},mounted:function(){this.$el.addEventListener("mouseenter",this.handleMauseOver),this.$el.addEventListener("mouseleave",this.handleMauseOver),document.documentElement.addEventListener("keyup",this.keyup),document.documentElement.addEventListener("mousemove",this.handleMove,!0),document.documentElement.addEventListener("mousedown",this.handleDown,!0),document.documentElement.addEventListener("mouseup",this.handleUp,!0),document.documentElement.addEventListener("wheel",this.handleWheel,!0),this.centerX=this.$el.clientWidth/2,this.centerY=this.$el.clientHeight/2},beforeDestroy:function(){document.documentElement.removeEventListener("keyup",this.keyup),this.$el.removeEventListener("mouseenter",this.handleMauseOver),this.$el.removeEventListener("mouseleave",this.handleMauseOver),document.documentElement.removeEventListener("mousemove",this.handleMove,!0),document.documentElement.removeEventListener("mousedown",this.handleDown,!0),document.documentElement.removeEventListener("mouseup",this.handleUp,!0),document.documentElement.removeEventListener("wheel",this.handleWheel,!0)}},N=X,I=(n("48f5"),Object(r["a"])(N,f,v,!1,null,"e59f206c",null)),P=I.exports,A=n("2f62"),T={name:"ModCanvas",components:{VueBlocksContainer:P},data:function(){return{dialog:!1,create:!1,selectBlockType:""}},computed:Object(p["a"])(Object(p["a"])({},Object(A["b"])({toolbar:"modeling/getToolbarEvent",typeBlock:"modeling/getTypeBlock",blocks:"modeling/getBlocks"})),{},{scene:{set:function(t){this.$store.dispatch("modeling/setScene",t)},get:function(){return this.$store.getters["modeling/getScene"]}},select:{set:function(t){this.$store.dispatch("modeling/setSelect",t)},get:function(){return this.$store.getters["modeling/getSelect"]}}}),methods:{addBlock:function(t){console.log(t),this.create=!1,this.selectBlockType="",this.$refs.container.addNewBlock(t)},selected:function(t){this.select=(null===t||void 0===t?void 0:t.id)||null},doSomething:function(t){console.log(t)}},watch:{toolbar:{handler:function(t){var e=t.event;"middle"===e&&this.addBlock(e),"validation"===e&&this.$store.dispatch("test","sdsdsdsdsdsd"),console.log(e)}}}},W=T,V=(n("12a0"),Object(r["a"])(W,h,m,!1,null,"23cd8abc",null)),F=V.exports,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"params"},[n("Navbar"),n("scrollbar",{style:t.height},[n("div",{staticClass:"params__items"},[n("form",{ref:"form",attrs:{novalidate:"novalidate"}},[n("div",{staticClass:"params__items--item"},[n("Input",{attrs:{label:"Название слоя",type:"text",parse:"name",name:"name"},model:{value:t.block.name,callback:function(e){t.$set(t.block,"name",e)},expression:"block.name"}}),n("Autocomplete2",{attrs:{list:t.list,label:"Тип слоя",name:"type"},model:{value:t.block.type,callback:function(e){t.$set(t.block,"type",e)},expression:"block.type"}})],1),n("at-collapse",{attrs:{value:"1"}},[n("at-collapse-item",{staticClass:"mb-3",attrs:{title:"Параметры слоя"}},[n("Forms",{attrs:{data:t.main},on:{change:t.change}})],1),n("at-collapse-item",{staticClass:"mb-3",attrs:{title:"Дополнительные параметры"}},[n("Forms",{attrs:{data:t.extra},on:{change:t.change}})],1)],1),n("div",{staticClass:"params__items--item"},[n("button",{staticClass:"mb-1",attrs:{disabled:"disabled"}},[t._v("Сохранить")]),n("button",{attrs:{disabled:"disabled"}},[t._v("Клонировать")])])],1)])])],1)},R=[],U=(n("b64b"),n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"params__navbar"},[n("ul",{staticClass:"params__navbar--items"},[t._l(t.items,(function(e,i){var s=e.title,a=e.active;return[n("li",{key:"item_"+i,class:["params__navbar--item",{active:a}],attrs:{title:s},on:{click:function(e){return t.click(i)}}},[t._v(" "+t._s(s)+" ")])]}))],2)])}),q=[],H={name:"PNavbar",props:{list:{type:Array,default:function(){return[{title:"Слой",active:!0}]}}},data:function(){return{items:[]}},methods:{click:function(t){this.items=this.items.map((function(e,n){return e.active=t===n,e}))}},created:function(){this.items=this.list}},K=H,J=(n("4d8f"),Object(r["a"])(K,U,q,!1,null,"307b0c36",null)),G=J.exports,Q=n("7d6e"),Z=n("6522"),tt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-inline-label"},[t._l(t.items,(function(e,i){var s=e.type,a=e.value,o=e.list,l=e.event,c=e.label,r=e.parse,u=e.name;return["tuple"===s?n("Input",{key:t.blockType+i,attrs:{value:t.getValue(t.valueDef[u],a),label:c,type:"text",parse:r,name:u,inline:""},on:{change:t.change}}):t._e(),"number"===s||"text"===s?n("Input",{key:t.blockType+i,attrs:{value:t.getValue(t.valueDef[u],a),label:c,type:s,parse:r,name:u,inline:""},on:{change:t.change}}):t._e(),"checkbox"===s?n("Checkbox",{key:t.blockType+i,attrs:{value:t.getValue(t.valueDef[u],a),label:c,type:"checkbox",parse:r,name:u,event:l},on:{change:t.change}}):t._e(),"select"===s?n("Select",{key:t.blockType+i,attrs:{value:t.getValue(t.valueDef[u],a),label:c,lists:o,parse:r,name:u},on:{change:t.change}}):t._e()]}))],2)},et=[],nt=n("53ca"),it=(n("a15b"),n("e902")),st=n("7b8d"),at={name:"Forms",components:{Input:Q["a"],Select:st["a"],Checkbox:it["a"]},props:{data:{type:Object,default:function(){return{type:"main",items:[],value:{}}}}},computed:{items:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.items)||[]},valueDef:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.value)||{}},type:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.type)||""},blockType:function(){var t;return(null===(t=this.data)||void 0===t?void 0:t.blockType)||""}},methods:{change:function(t){this.$emit("change",Object(p["a"])({type:this.type},t))},getValue:function(t,e){var n=null!==t&&void 0!==t?t:e;return"object"===Object(nt["a"])(n)?n.join():n}},filters:{toString:function(t){return"object"===Object(nt["a"])(t)?t.join():t},isCheck:function(t){return!!t}}},ot=at,lt=Object(r["a"])(ot,tt,et,!1,null,null,null),ct=lt.exports,rt={name:"Params",components:{Input:Q["a"],Autocomplete2:Z["a"],Forms:ct,Navbar:G},data:function(){return{type:""}},computed:Object(p["a"])(Object(p["a"])({},Object(A["b"])({list:"modeling/getList",layers:"modeling/getLayersType"})),{},{block:{set:function(t){this.$store.dispatch("modeling/setBlock",t)},get:function(){return this.$store.getters["modeling/getBlock"]||{}}},parametersMain:function(){var t,e;return(null===(t=this.block)||void 0===t||null===(e=t.parameters)||void 0===e?void 0:e.main)||{}},parametersExtra:function(){var t,e;return(null===(t=this.block)||void 0===t||null===(e=t.parameters)||void 0===e?void 0:e.extra)||{}},main:function(){if(Object.keys(this.layers).length&&this.block.type){var t,e,n,i=(null===(t=this.layers[this.block.type])||void 0===t?void 0:t.main)||[],s=(null===(e=this.block)||void 0===e||null===(n=e.parameters)||void 0===n?void 0:n.main)||{},a=this.block.type;return{type:"main",items:i,value:s,blockType:a}}return{type:"main",items:[],value:{}}},extra:function(){if(Object.keys(this.layers).length&&this.block.type){var t,e,n,i=(null===(t=this.layers[this.block.type])||void 0===t?void 0:t.extra)||[],s=(null===(e=this.block)||void 0===e||null===(n=e.parameters)||void 0===n?void 0:n.extra)||{},a=this.block.type;return{type:"extra",items:i,value:s,blockType:a}}return{type:"extra",items:[],value:{}}},height:function(){return this.$store.getters["settings/height"]({clean:!0})}}),methods:{change:function(t){var e=t.type,n=t.name,i=t.value;console.log({type:e,name:n,value:i}),this.block.parameters[e][n]=i,console.log(this.block.parameters[e][n])}}},ut=rt,dt=(n("12da"),Object(r["a"])(ut,z,R,!1,null,"044de8ee",null)),ht=dt.exports,mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("at-modal",{staticClass:"scroll-area",attrs:{width:"680"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("span",[t._v("Загрузка модели")])]),n("div",{staticClass:"row at-row"},[n("div",{staticClass:"col-16 models-list scroll-area"},[n("scrollbar",[n("ul",{staticClass:"loaded-list"},[t._l(t.preset,(function(e,i){return n("li",{key:"preset_"+i,on:{click:function(n){return t.getModel(e)}}},[n("i",{staticClass:"icon icon-file-text"}),n("span",[t._v(t._s(e.label))])])})),t._l(t.custom,(function(e,i){return n("li",{key:"custom_"+i,on:{click:function(n){return t.getModel(e)}}},[n("i",{staticClass:"icon icon-file-text"}),n("span",[t._v(t._s(e.label))]),n("div",{staticClass:"remove"})])}))],2)])],1),n("div",{staticClass:"col-8"},[t.info.name?n("div",{staticClass:"model-arch"},[n("div",{staticClass:"wrapper hidden"},[n("div",{staticClass:"modal-arch-info"},[n("div",{staticClass:"model-arch-info-param name"},[t._v(" Name: "),n("span",[t._v(t._s(t.info.alias||""))])]),n("div",{staticClass:"model-arch-info-param input_shape"},[t._v(" Input shape: "),n("span",[t._v(t._s(t.info.input_shape||""))])]),n("div",{staticClass:"model-arch-info-param datatype"},[t._v(" Datatype: "),n("span",[t._v(t._s(t.info.name))])])]),n("div",{staticClass:"model-arch-img my-5"},[n("img",{attrs:{alt:"",width:"100",height:"200",src:"data:image/png;base64,"+t.info.image||!1}})]),n("div",{staticClass:"model-save-arch-btn"},[n("button",{on:{click:t.download}},[t._v("Загрузить")])])])]):t._e()])]),n("div",{attrs:{slot:"footer"},slot:"footer"})])},pt=[],ft=n("1da1"),vt=(n("96cf"),{name:"ModalWindowLoadModel",data:function(){return{lists:[],info:{}}},computed:Object(p["a"])(Object(p["a"])({},Object(A["b"])({})),{},{preset:function(){var t;return(null===(t=this.lists[0])||void 0===t?void 0:t.models)||[]},custom:function(){var t;return(null===(t=this.lists[1])||void 0===t?void 0:t.models)||[]},dialog:{set:function(t){this.$store.dispatch("modeling/setDialog",t)},get:function(){return this.$store.getters["modeling/getDialog"]}}}),methods:{CloseModalWindow:function(){this.$emit("CloseModalWindow",!1)},load:function(){var t=this;return Object(ft["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("modeling/info",{});case 2:n=e.sent,n&&(t.lists=n);case 4:case"end":return e.stop()}}),e)})))()},getModel:function(t){var e=this;return Object(ft["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$store.dispatch("modeling/load",t);case 2:i=n.sent,i&&(e.info=i),e.dialog=!1;case 5:case"end":return n.stop()}}),n)})))()},download:function(){console.log(this.info)}},watch:{dialog:{handler:function(t){console.log(t),t&&this.load()}}}}),gt=vt,kt=(n("60ce"),Object(r["a"])(gt,mt,pt,!1,null,"b4f491d0",null)),bt=kt.exports,yt={name:"Modeling",components:{Toolbar:d,ModCanvas2:F,Params:ht,ModalLoadModel:bt}},_t=yt,xt=(n("5544"),Object(r["a"])(_t,i,s,!1,null,"f32ef41a",null));e["default"]=xt.exports},e902:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"t-field t-inline"},[n("label",{staticClass:"t-field__label",attrs:{for:t.parse}},[t._v(t._s(t.label))]),n("div",{staticClass:"t-field__switch"},[n("input",{staticClass:"t-field__input",attrs:{id:t.parse,type:t.type,name:t.parse},domProps:{checked:t.checked?"checked":"",value:t.checked},on:{change:t.change}}),n("span")])])},s=[],a=(n("b0c0"),n("caad"),n("2532"),n("56d7")),o={props:{label:{type:String,default:"Label"},type:{type:String,default:"text"},value:{type:[Boolean]},name:{type:String},parse:{type:String},event:{type:Array,default:function(){return[]}}},data:function(){return{checked:null}},methods:{change:function(t){var e=t.target.checked;this.$emit("change",{name:this.name,value:e}),a["bus"].$emit("change",{event:this.name,value:e})}},created:function(){var t=this;this.checked=this.value,this.event.length&&a["bus"].$on("change",(function(e){var n=e.event;t.event.includes(n)&&(t.checked=!1)}))},destroyed:function(){this.event.length&&(a["bus"].$off(),console.log("destroyed",this.name))}},l=o,c=(n("b95f"),n("2877")),r=Object(c["a"])(l,i,s,!1,null,"5b5352c2",null);e["a"]=r.exports},edae:function(t,e,n){},f011:function(t,e,n){"use strict";n("d14a")}}]);